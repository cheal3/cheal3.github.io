<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Choi Dong Wook blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Choi Dong Wook blog">
<meta property="og:url" content="http://cheal3.github.io/index.html">
<meta property="og:site_name" content="Choi Dong Wook blog">
<meta property="og:locale" content="ko_KR">
<meta property="article:author" content="cheal3@naver.com">
<meta property="article:tag" content="IT">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Choi Dong Wook blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.1.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Choi Dong Wook blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="검색"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://cheal3.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-공부/잡공부/푸시알림" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/15/%EA%B3%B5%EB%B6%80/%EC%9E%A1%EA%B3%B5%EB%B6%80/%ED%91%B8%EC%8B%9C%EC%95%8C%EB%A6%BC/" class="article-date">
  <time datetime="2020-09-15T09:28:14.000Z" itemprop="datePublished">2020-09-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/15/%EA%B3%B5%EB%B6%80/%EC%9E%A1%EA%B3%B5%EB%B6%80/%ED%91%B8%EC%8B%9C%EC%95%8C%EB%A6%BC/">기획) 기능정의</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Spin-pic"><a href="#Spin-pic" class="headerlink" title="Spin pic"></a>Spin pic</h1><p><img src="/img/ezgif.com-video-to-gif.gif">  </p>
<p>FCM은 앱의 키값을 식별하여 특정 스마트폰에 데이터를 전달할 수 있다. 사용자가 앱을 설치하고 알람설정에 동의하면 Instance ID에 해당하는 FCM 토큰을 얻을 수 있다. FCM 의 push 메시지는 앱의 고유한 키 값과 사용자들의 토큰을 통해 이루어진다.</p>
<p>푸시 메시지는 앱의 key값과 사용자 고유의 token 값이 있어야 보낼 수 있다.<br>사용자에게 푸시를 전송하기 위해서는</p>
<ol>
<li>유저 고유의 id 값으로 토큰을 생성하고 정보를 조회하는 Job 을 만들고</li>
<li>FCM이나 Kakao 푸시 서버로 전송하는 job을 생성한다.</li>
</ol>
<p>(카카오 푸시 서버란 카카오톡 메시지를 보내는 것이 아닌 자체 개발 앱에서 푸시 메시지를 보내는 api를 제공<br>  현재 안드로이드는 구글 그리고 IOS는 애플에서 푸시기능을 제공하고있는데 항상 통신중인 상태에서 푸시를 받는 방식은 너무나 비효율적이라 (푸시를 받기 위해 24시간 서버와 통신해야 합니다) “필요할 때만” 데이터를 전달하기 위한 서버를 카카오에서 제공하고 있는 것 )</p>
<p>Job을 생성하여 일을 처리하는 이유는</p>
<ol>
<li>서버에서 트래픽을 우선 받아내는 것이 중요하므로 간단한 요청만 처리하고 나머지는 전부 Job형태로 만들어서 처리</li>
<li>외부 자원에(DB, 카카오 서버) 의존하는 경우 어떤 Job에서 장애가 발생했는지를 통해 쉽게 파악이 가능하다.</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cheal3.github.io/2020/09/15/%EA%B3%B5%EB%B6%80/%EC%9E%A1%EA%B3%B5%EB%B6%80/%ED%91%B8%EC%8B%9C%EC%95%8C%EB%A6%BC/" data-id="ckf3cla7s0000l4v4cmdbga3u" class="article-share-link">공유</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-doit리액트/1일차" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/14/doit%EB%A6%AC%EC%95%A1%ED%8A%B8/1%EC%9D%BC%EC%B0%A8/" class="article-date">
  <time datetime="2020-09-14T02:43:22.000Z" itemprop="datePublished">2020-09-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%EC%9D%B8%ED%84%B4/">인턴</a>►<a class="article-category-link" href="/categories/%EC%9D%B8%ED%84%B4/%EA%B3%B5%EB%B6%80/">공부</a>►<a class="article-category-link" href="/categories/%EC%9D%B8%ED%84%B4/%EA%B3%B5%EB%B6%80/React/">React</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/14/doit%EB%A6%AC%EC%95%A1%ED%8A%B8/1%EC%9D%BC%EC%B0%A8/">Do it! 리액트 프로그래밍 1일차</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="1-React의-특징"><a href="#1-React의-특징" class="headerlink" title="1.React의 특징"></a>1.React의 특징</h1><p>React는 페이스북을 개발할 때 사용한 기술이며, 공개 소프트웨어이다. 리액트의 가장 큰 특징은 ‘화면 출력에 특화된 프레임워크’라고 할 수 있겠다.<br>   <br/><br>JS에는 제이쿼리와 핸들바 라는 라이브러리가 있는데 이 라이브러리들의 치명적인 단점은 화면이 커질수록 화면을 그리는 시간이 길어진다는 점이다. 하지만 이보다 더 심각한 문제는 화면의 일부분만 수정되어도 화면 전체를 다시 그린다는 점이다.  화면 구성을 트리 구조로 생각하면 부모노드가 바뀌었을때 자식노드까지 전부 바뀌어야 하므로 비효율적이라고 생각하면 쉽다.<br>   <br/><br>페이스북 개발자들은  이런 문제를 해결하기 위해 게임 엔진 원리(다음 장면에 필요한 화면을 미리 그려 두는 방법으로 화면을 빠르게 전환하는 방식)를 도입했다.  다음에 나타날 화면의 일부(노드)를 미리 그려 놓고 변경된 화면의 일부(노드)만 수정하는 <strong>가상 화면(Virtual DOM)</strong> 기술이 바로 이것이다.</p>
<br/>

<h1 id="2-npm"><a href="#2-npm" class="headerlink" title="2.npm"></a>2.npm</h1><p><strong>npm</strong> 은 <a target="_blank" rel="noopener" href="https://www.npmjs.com에서/">https://www.npmjs.com에서</a> 필요한 라이브러리를 내려받아 설치하고 삭제하는 등의 관리를 해주는 프로그램이다.  npm은 실제로 node_modules 폴더에 라이브러리를 내려받아 저장하고 package.json이라는 파일에 설치된 라이브러리의 정보를 적어 저장한다.<br><br/></p>
<h4>라이브러리 명세를 따로 관리하는 이유?</h4>

<p>node_modules에 저장되는 라이브러리의 용량이 굉장히 크기 때문에 프로젝트를 공유할 때 용량이 큰 라이브러리까지 전송할 필요 없이 라이브러리 명세와 코드만 전달하면 되기 때문이다.<br><br/></p>
<h4>웹팩이란?</h4>

<p>웹팩은 프로젝트에 사용된 파일을 분석하여 기존 웹 문서 파일로 변환하는 도구이다.</p>
<p>쉽게말하면 웹 브라우저가 해석할 수 없는 파일(sass  , cjs …)을  js , css 등 웹 브라우저가 해석할 수 있는 형태로 변환해준다.</p>
<br/>

<h1 id="3-ES6-문법"><a href="#3-ES6-문법" class="headerlink" title="3.ES6 문법"></a>3.ES6 문법</h1>  <h2> 3.1 템플릿 문자열</h2>
  <h4> 기존 자바스크립트의 문자열 사용 방법</h4>

<figure class="highlight javascript"><figcaption><span>기존JS</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> string1 = <span class="string">&#x27;안녕하세요&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> string2 = <span class="string">&#x27;반갑습니다&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> greeting = string1 + <span class="string">&#x27; &#x27;</span> + string2;   <span class="comment">//병합 연산자를 사용해 연결</span></span><br><span class="line"><span class="keyword">var</span> product = &#123;<span class="attr">name</span> : <span class="string">&#x27;도서&#x27;</span> , <span class="attr">price</span>: <span class="string">&#x27;4200원&#x27;</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> message = <span class="string">&#x27;제품&#x27;</span> + product.name+ <span class="string">&#x27;의 가격은&#x27;</span> + product.price + <span class="string">&#x27;입니다&#x27;</span>;  <span class="comment">//문자열과 변수를 연결할 때도 병합 연산자를 사용</span></span><br><span class="line"><span class="keyword">var</span> multiLine = <span class="string">&#x27;문자열1\n문자열2&#x27;</span>;     <span class="comment">// 줄바꿈을 할 때는 이스케이프 시퀀스(\n)를 포함</span></span><br><span class="line"><span class="keyword">var</span> value1 = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> value2 = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">var</span> boolValue = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> operator1 = <span class="string">&#x27;곱셈값은 &#x27;</span> + (value1*value2) + <span class="string">&#x27;입니다.&#x27;</span>;    <span class="comment">//괄호를 먼저 실행</span></span><br><span class="line"><span class="keyword">var</span> operator2 = <span class="string">&#x27;불리언값은 &#x27;</span> + (boolValue ? <span class="string">&#x27;참&#x27;</span> : <span class="string">&#x27;거짓&#x27;</span>) + <span class="string">&#x27;입니다.&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>기존 자바스크립트에서는 문자열과 문자열 또는 문자열과 변수를 연결하려면 병합 연산자 + 를 사용하였다.<br>ES6에서는 이런점을 개선하기 위해서 <strong>템플릿 문자열</strong>을 도입했다.</p>
<p>템플릿 문자열을 작은 따옴표 대신 백틱(`)으로 문자열을 표현한다. 또한 템플릿 문자열에 특수 기호 $를 사용하여 변수 또는 식을 포함할 수도 있다.</p>
<figure class="highlight javascript"><figcaption><span>ES6</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> string1 = <span class="string">&#x27;안녕하세요&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> string2 = <span class="string">&#x27;반갑습니다&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> greeting = <span class="string">`<span class="subst">$&#123;string1&#125;</span> <span class="subst">$&#123;string2&#125;</span>`</span>;   <span class="comment">//$기호를 사용하여 변수를 포함</span></span><br><span class="line"><span class="keyword">var</span> product = &#123;<span class="attr">name</span> : <span class="string">&#x27;도서&#x27;</span> , <span class="attr">price</span>: <span class="string">&#x27;4200원&#x27;</span> &#125;;  </span><br><span class="line"><span class="keyword">var</span> message = <span class="string">`제품 + <span class="subst">$&#123;product.name&#125;</span>+ 의 가격은 + <span class="subst">$&#123;product.price&#125;</span> + 입니다`</span>;   <span class="comment">//$기호를 사용하여 변수를 포함</span></span><br><span class="line"><span class="keyword">var</span> multiLine = <span class="string">`문자열</span></span><br><span class="line"><span class="string">문자열2`</span>;     <span class="comment">//이스케이프 시퀀스를 사용하지 않고 Enter를 눌러 줄 바꾸는 것을 허용</span></span><br><span class="line"><span class="keyword">var</span> value1 = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> value2 = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">var</span> boolValue = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> operator1 = <span class="string">`곱셈값은  + <span class="subst">$&#123;value1*value2&#125;</span> + 입니다.`</span>;   <span class="comment">//$기호를 사용하여 연산을 포함시킬 수 있다.</span></span><br><span class="line"><span class="keyword">var</span> operator2 = <span class="string">`불리언값은  + <span class="subst">$&#123;boolValue ? <span class="string">&#x27;참&#x27;</span> : <span class="string">&#x27;거짓&#x27;</span>&#125;</span> + 입니다.`</span>;</span><br></pre></td></tr></table></figure>

  <br/>
  <br/>
  <h2> 3.2 전개 연산자</h2>
  전개 연산자는 나열형 자료를 추출하거나 연결할 때 사용한다. 사용 방법은 배열이나 객체, 변수명 앞에 마침표 세 개(...)
  를 입력한다. 기존 JS에서는 배열의 일부 요소만 잘라내거나 연결하려면 배열 인덱스와 함께 배열 내장 함수들을 사용해야 했다.

  <figure class="highlight javascript"><figcaption><span>기존JS</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array1 = [<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> array2 = [<span class="string">&#x27;three&#x27;</span> ,<span class="string">&#x27;four&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> combined = [array1[<span class="number">0</span>], array1[<span class="number">1</span>], array2[<span class="number">0</span>] , array2[<span class="number">1</span>]]; <span class="comment">// 배열의 각 요소 추출</span></span><br><span class="line"><span class="keyword">var</span> combined = array1.concat(array2);  <span class="comment">// 배열 합치기</span></span><br><span class="line"><span class="keyword">var</span> combined = [].concat(array1, array2);    <span class="comment">//배열 합치기</span></span><br><span class="line"><span class="keyword">var</span> first = array1[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">var</span> second = array1[<span class="number">1</span>];  <span class="comment">// 배열 요소 추출</span></span><br><span class="line"><span class="keyword">var</span> three = array1[<span class="number">2</span>] || <span class="string">&#x27;empty&#x27;</span>;  <span class="comment">//  ||연산자를 조합하여 추출할 배열 요소가 없을시 기본값 지정</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">this</span>.arguments);  <span class="comment">// 특수 변수(arguments)를 사용해 함수 내 인자 항목들을 배열로 변환  ex_ func(a,b,c) 에서 args[0] = a , args[1] = b , args[2] = c</span></span><br><span class="line">  <span class="keyword">var</span> first = args[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">var</span> others = args.slice(<span class="number">1</span>,args.length);  <span class="comment">//인덱스 범위에 해당하는 배열 요소를 추출</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>  위 코드를 ES6 전개 연산자를 도입하여 간소화 시켜보면 다음과 같다.</p>
  <figure class="highlight javascript"><figcaption><span>ES6</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array1 = [<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> array2 = [<span class="string">&#x27;three&#x27;</span> ,<span class="string">&#x27;four&#x27;</span>];</span><br><span class="line"><span class="keyword">const</span> combined = [...array1, ...array2];</span><br><span class="line"><span class="comment">//combined = [&#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27; ,&#x27;four&#x27;];</span></span><br><span class="line"><span class="keyword">const</span> [first , second, three = <span class="string">&#x27;empt&#x27;</span> , ... others] = array1;</span><br><span class="line"><span class="comment">//first = &#x27;one&#x27; , second = &#x27;two&#x27; , three = &#x27;empty&#x27; , others = []</span></span><br><span class="line">func(...args) &#123;<span class="keyword">var</span> [first , ... others] = args; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  <br/>
  <br/>
  <h2> 3.3 가변 변수와 불변 변수</h2>
  기존 JS에서는 var 키우드를 사용했지만 ES6에서는 값을 수정할 수 있는 가변 변수를 위한 `let` 키워드와, 값을 수정할 수 없는 불변 변수를 위한 `const` 키워드를 사용한다.
  let 키워드로 선언한 변수는 읽거나 수정할 수 있기 때문에 이 변수를 수정해도 되는 것인지 코드만 읽어도 알 수 있기 때문에 유용하다.
  <figure class="highlight javascript"><figcaption><span>let</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">1</span>;</span><br><span class="line">num = num * <span class="number">3</span>;</span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;문자&#x27;</span>;</span><br><span class="line">str = <span class="string">&#x27;다른 문자&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> arr = [];</span><br><span class="line">arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line">obj = &#123;<span class="attr">name</span>: <span class="string">&#x27;새 객체&#x27;</span>&#125;;</span><br></pre></td></tr></table></figure>
  <br/>

<p>불변 변수를 사용하면 무결성 제약 규칙에 의해 변수가 변하는 시점을 쉽게 파악할 수 있고, 수정 전과 후의 변수값을 비교할 수 있어 가변 변수보다 유용하다. 이러한 불변 변수는 const 키워드로 선언하는데, const로 선언한 변수는 읽기만 가능하다. 그런데 <strong>불변 변수는 값을 다시 할당할 수 없는 것이지 변경할 수는 있다.</strong></p>
<figure class="highlight javascript"><figcaption><span>const</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num = <span class="number">1</span>;</span><br><span class="line"><span class="comment">//num = 3;    자료형 오류</span></span><br><span class="line"><span class="keyword">const</span> str = <span class="string">&#x27;문자&#x27;</span>;</span><br><span class="line"><span class="comment">//str = &#x27;새 문자&#x27;;  자료형 오류</span></span><br><span class="line"><span class="keyword">const</span> arr = [];</span><br><span class="line"><span class="comment">//arr=[1,2,3];   자료형 오류</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line"><span class="comment">//obj = &#123;name: &#x27;내 이름&#x27;&#125;;  자료형 오류</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr2 = [];</span><br><span class="line">arr2.push(<span class="number">1</span>); <span class="comment">// arr2 = [1]</span></span><br><span class="line">arr2.splice(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>); <span class="comment">// arr2= [0,1]</span></span><br><span class="line">arr2.pop(); <span class="comment">// arr2 = [1]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj2 = &#123;&#125;;</span><br><span class="line">obj2[<span class="string">&#x27;name&#x27;</span>] = <span class="string">&#x27;내이름&#x27;</span>; <span class="comment">// obj2= &#123;name : &#x27;내이름&#x27;&#125;</span></span><br><span class="line"><span class="built_in">Object</span>.assign(obj2 &#123;<span class="attr">name</span>: <span class="string">&#x27;새이름&#x27;</span>&#125;); <span class="comment">// ojb2= &#123;name:&#x27;새이름&#x27;&#125;</span></span><br><span class="line"><span class="keyword">delete</span> obj2.name; <span class="comment">// obj2 = &#123;&#125;</span></span><br></pre></td></tr></table></figure>

<p>불변 변수로 선언한 배열이나 객체에 자바스크립트 내장 함수로 값을 변경하였더니 값이 변경되었다.<br>이런 것을 <strong>무결성 제약 조건에 위배되었다</strong> 라고 한다. 그러므로 무결성을 유지하면서 불변 변수의 값을 수정해야 할 때에는 수정할 불변 변수를 새로 만들어 새로 정의하는 식으로 무결성 제약 조건을 지킬 수 있다.</p>
<br/>
<br/>
<h2> 3.4 클래스</h2>

<figure class="highlight javascript"><figcaption><span>기존JS</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Shape</span>(<span class="params">x,y</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = <span class="string">&#x27;Shape&#x27;</span>;</span><br><span class="line">  <span class="built_in">this</span>.move(x,y);</span><br><span class="line">&#125;</span><br><span class="line">Shape.create = <span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>) </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> Shape(x,y);&#125;;</span><br><span class="line">Shape.prototype.move = <span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.x = x;</span><br><span class="line">  <span class="built_in">this</span>.y = y;</span><br><span class="line">&#125;</span><br><span class="line">Shape.prototype.area = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Shape.prototype=&#123;</span><br><span class="line">  move: <span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.x = x;</span><br><span class="line">    <span class="built_in">this</span>.y = y;</span><br><span class="line">  &#125;,</span><br><span class="line">  area: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> Shape(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">s.area();</span><br></pre></td></tr></table></figure>

<p>new Shape(0,0)와 같이 함수를 호출하면 this 객체에 해당하는 변수 및 함수가 prototype 객체에 선언된 변수와 함수를 함께 참조한다.  예를 들어 Shape()함수(생성자)에는 this.move에 함수를 정의하지 않았지만 prototype 객체에 move() 함수가 정의되어 있으므로 prototype 선언 이후 new 연산자로 Shape()함수를 호출하여 Shape 객체 s를 만든다. 그러면 s는 prototype 객체 안에 있는 move()함수를 참조할 수 있다. 또한 s는 prototype에 추가로 정의된 area() 함수도 참조할 수 있다. 클래스의 상속은 prototype객체의 값을 객체 내장 함수를 사용해 덮어씌우는 방식을 이용하면 된다.</p>
<blockquote>
<p>ex) 사람객체가  공통으로 가지고있는 eyes , noes 등을 prototype으로 정의해 놓으면 객체를 생성할 때마다 메모리에 할당시키지 않고 가져다 쓸 수 있음.</p>
</blockquote>
<br/>

<figure class="highlight javascript"><figcaption><span>ES6</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span></span>&#123;</span><br><span class="line">  <span class="keyword">static</span> create(x,y) &#123; <span class="keyword">return</span> <span class="keyword">new</span> Shape(x,y);&#125;</span><br><span class="line">  name = <span class="string">&#x27;Shape&#x27;</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(x,y)&#123;</span><br><span class="line">    <span class="built_in">this</span>.move(x,y);</span><br><span class="line">  &#125;</span><br><span class="line">  move(x,y)&#123;</span><br><span class="line">    <span class="built_in">this</span>.x=x;</span><br><span class="line">    <span class="built_in">this</span>.y=y;</span><br><span class="line">  &#125;</span><br><span class="line">  area()&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> Shape(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">s.area(); <span class="comment">//0</span></span><br></pre></td></tr></table></figure>

<p>ES6에서는 class 키워드로 클래스를 정의하므로 코드가 훨씬 간결해진다. 코드를 보면 class 키워드로 Shape 클래스를 정의했으며, Shape 클래스 안에 생성자 함수도 추가되었다. 클래스 정의 표현식에는 객체가 생성될 때 함께 만들어 질 변수나 클래스 변수를 클래스 선언 블록 안에 같이 정의할 수 있게 변경되었다.</p>
<br/>
<br/>
<h2> 3.5 화살표 함수</h2>

<p>화살표 함수는 ES6에 추가된 표현식을 사용하는 함수로 화살표 기호 <code>=&gt;</code> 로 함수를 선언한다.</p>
<figure class="highlight javascript"><figcaption><span>기존JS</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">first,second</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> first + second;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// typeof add ===&#x27;function&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span>(<span class="params">first,second</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> first + second;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//typeof add ===&#x27;function&#x27;</span></span><br></pre></td></tr></table></figure>

<p>typeof로 add와 ‘function’이라는 문자열을 비교해 보면 true가 나올 것이다. 하지만 첫 번째 방식은 함수 이름이 있고 두 번째 방식은 함수 이름이 없다.</p>
<figure class="highlight javascript"><figcaption><span>ES6</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> add = <span class="function">(<span class="params">first, second</span>) =&gt;</span>&#123;    <span class="comment">//앞에서 본 기존의 함수 표현식을 화살표 함수로 변경했다.</span></span><br><span class="line">  <span class="keyword">return</span> first + second;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> add = <span class="function">(<span class="params">first , second</span>) =&gt;</span> first + second;  <span class="comment">//결과값을 바로 반환하는 경우에는 중괄호를 생략할 수 있다.</span></span><br><span class="line"><span class="keyword">var</span> addAndMultiple = (first , second) = &gt; (&#123;<span class="attr">add</span>: first + second , <span class="attr">multiply</span> : firs t * second&#125;);</span><br></pre></td></tr></table></figure>

<p>화살표 함수는 함수 표현식을 간결하게 할 수 있고, 이후 배울 커링과 같은 디자인 패턴에서 사용되는 함수를 반환할 때 ‘계단형 함수 선언’ 과 같은 구조가 만들어지지 않게 해준다는 장점이 있다. 또한 화살표 함수는 콜백 함수의 this범위로 생기는 오류를 피하기 위해 bind() 함수를 사용하여 this 객체를 전달하는 과정을 포함하고 있다.</p>
<figure class="highlight javascript"><figcaption><span>ES6</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span>&#123;</span><br><span class="line">  value = <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">constructor</span>()&#123;</span><br><span class="line">    <span class="keyword">var</span> addThis2 = <span class="function"><span class="keyword">function</span>(<span class="params">first,second</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.value + first + second;</span><br><span class="line">    &#125;.bind(<span class="built_in">this</span>);</span><br><span class="line">    <span class="keyword">var</span> addThis3 = <span class="function">(<span class="params">first,second</span>) =&gt;</span> <span class="built_in">this</span>.value + first + second;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<br/>
<br/>
<h2> 3.6 객체 확장 표현식과 구조 분해 할당</h2>
ES6에서는 이전 자바스크립트 문법에서 객체를 선언할 때 불편했던 점을 많이 개선했다. 객체나 배열의 특정값을 손쉽게 추출할 수 있는 표현식도 추가하였다.

<figure class="highlight javascript"><figcaption><span>기존JS</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> y = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">x</span> :x , <span class="attr">y</span>: y&#125;;   <span class="comment">//키 이름과 키 값이 동일하다</span></span><br><span class="line"><span class="keyword">var</span> randomKeyString = <span class="string">&#x27;other&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> combined =&#123;&#125;;</span><br><span class="line">combined[<span class="string">&#x27;one&#x27;</span> + randomKeyString] = <span class="string">&#x27;some value&#x27;</span>;  <span class="comment">// 연산 결과로 키 값을 대입할 때는 코드를 추가로 작성</span></span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;  <span class="comment">// 객체에 함수를 추가할 때는 변수에 함수를 할당해야함</span></span><br><span class="line">  x: x,</span><br><span class="line">  methodA : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">&#x27;method A&#x27;</span>);&#125;,</span><br><span class="line">  methodB : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="number">0</span>; &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><figcaption><span>ES6</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> y = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;x,y&#125;;   <span class="comment">//키 값을 생략하면 자동으로 키의 이름으로 키 값을 지정</span></span><br><span class="line"><span class="keyword">var</span> randomKeyString = <span class="string">&#x27;other&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> combined =&#123;</span><br><span class="line">  [<span class="string">&#x27;one&#x27;</span> + randomKeyString] : <span class="string">&#x27;some value&#x27;</span>, <span class="comment">//객체생성 블록 안에 대괄호를 사용하여 표현식을 작성하면 계산된 키 값 생성</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;  <span class="comment">//function 키워드를 생략하여 선언 가능</span></span><br><span class="line">  x,</span><br><span class="line">  methodA() &#123; <span class="built_in">console</span>.log(<span class="string">&#x27;method A&#x27;</span>);&#125;,</span><br><span class="line">  methodB() &#123; <span class="keyword">return</span> <span class="number">0</span>; &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>다음은 구조 분해 사용 방법을 알아보자.</p>
<figure class="highlight javascript"><figcaption><span>기존JS</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> list = [<span class="number">0</span>,<span class="number">1</span>];</span><br><span class="line"><span class="keyword">var</span> item1  = list[<span class="number">0</span>];  <span class="comment">//배열의 인덱스를 사용하여 변수에 할당</span></span><br><span class="line"><span class="keyword">var</span> item2 = list[<span class="number">1</span>];</span><br><span class="line"><span class="keyword">var</span> item3 = list[<span class="number">2</span>] || <span class="number">-1</span>; <span class="comment">// || 연산자를 이용하여 배열의 해당 인덱스에 값이 없으면 기본값으로 할당</span></span><br><span class="line"><span class="keyword">var</span> temp = item2;   <span class="comment">// 배열의 두 값을 치환</span></span><br><span class="line">item2 = item1;</span><br><span class="line">item1 = temp;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  key1: <span class="string">&#x27;one&#x27;</span>,</span><br><span class="line">  key2: <span class="string">&#x27;two&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> key1 = obj.key1;  <span class="comment">// 객체의 키값을 변수에 할당</span></span><br><span class="line"><span class="keyword">var</span> key2 = obj.key2;  </span><br><span class="line"><span class="keyword">var</span> key3 = obj.key3 || <span class="string">&#x27;default key3 value&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> newKey1 = obj.key1;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><figcaption><span>ES6</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> y = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;x,y&#125;;   <span class="comment">//키 값을 생략하면 자동으로 키의 이름으로 키 값을 지정</span></span><br><span class="line"><span class="keyword">var</span> randomKeyString = <span class="string">&#x27;other&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> combined =&#123;</span><br><span class="line">  [<span class="string">&#x27;one&#x27;</span> + randomKeyString] : <span class="string">&#x27;some value&#x27;</span>, <span class="comment">//객체생성 블록 안에 대괄호를 사용하여 표현식을 작성하면 계산된 키 값 생성</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;  <span class="comment">//function 키워드를 생략하여 선언 가능</span></span><br><span class="line">  x,</span><br><span class="line">  methodA() &#123; <span class="built_in">console</span>.log(<span class="string">&#x27;method A&#x27;</span>);&#125;,</span><br><span class="line">  methodB() &#123; <span class="keyword">return</span> <span class="number">0</span>; &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cheal3.github.io/2020/09/14/doit%EB%A6%AC%EC%95%A1%ED%8A%B8/1%EC%9D%BC%EC%B0%A8/" data-id="ckf3cla800002l4v4681z3h5k" class="article-share-link">공유</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-쓰레기통/웹/브라우저" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/09/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/%EC%9B%B9/%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80/" class="article-date">
  <time datetime="2020-09-09T06:48:52.000Z" itemprop="datePublished">2020-09-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/">쓰레기통</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/09/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/%EC%9B%B9/%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80/">브라우저는 어떻게 작동하는가??</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <br/>



<h1 id="브라우저"><a href="#브라우저" class="headerlink" title="브라우저"></a>브라우저</h1><p><code>브라우저</code>의 정의를 먼저 살펴보면  <br/></p>
<p>브라우저는  인터넷에서 웹서버의 모든 정보를 볼 수 있게 해줄 뿐 아니라, 하이퍼텍스트 문서 검색을 도와주는 응용 프로그램이다</p>
<br/>

<h1 id="브라우저의-기능"><a href="#브라우저의-기능" class="headerlink" title="브라우저의 기능"></a>브라우저의 기능</h1><p>브라우저의 주요 기능은 위에서 말했듯 사용자가 선택한 자원을 서버에 요청하고 브라우저에 표시하는 것이다.  자원의 주소는 <strong>URI(uniform Resource Identifier)</strong> 에 의해 정해진다.</p>
<p>브라우저는 HTML과 CSS의 명세에 따라 HTML 파일을 해석해서 표시하는데 이 명세는 W3C(World WIde Web Consortium)에서 정한다.  과거에는 브라우저들이 명세에 따라 구현하고 독자적인 방법으 로 확장함으로써 심각한 호환성 문제를 겪었지만 최근에는 대부분의 브라우저가 표준 명세를 따른다.</p>
<blockquote>
<p>URI : 통합 자원 식별자 하위 개념으로 URL , URN이 있다.</p>
<blockquote>
<p>URL (Uniform Resource Locator) : 서버들 있는 파일의 위치를 표시하는 방식</p>
<p>URN (Uniform Resource Name) : 위치와 상관없이 리소스의 이름을 이용해서 접근하는 방식</p>
<p>ex )  dmn.tld/page.htm</p>
</blockquote>
<p>ex) <a target="_blank" rel="noopener" href="http://test.com/test.pdf?docid=111">http://test.com/test.pdf?docid=111</a> 를 URI라고 하고 <a target="_blank" rel="noopener" href="http://test.com/test.pdf">http://test.com/test.pdf</a> 가 URL 이다.</p>
</blockquote>
<br/>



<h1 id="브라우저의-구조"><a href="#브라우저의-구조" class="headerlink" title="브라우저의 구조"></a>브라우저의 구조</h1><p>브라우저의 주요 구성 요소는 다음과 같다</p>
<br/>

<p><img src="/img/%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EA%B5%AC%EC%A1%B0.png">  </p>
<ol>
<li>사용자 인터페이스 : 주소 표시줄 , 이전 / 다음 버튼 북마크 메뉴 등 , 요청한 페이지를 보여주는 창을 제외한 나머지 부분</li>
<li>브라우저 엔진 : 사용자 인터페이스와 렌더링 엔진 사이의 동작을 제어</li>
<li>렌더링 엔진 : 요청한 콘텐츠를 표시 HTML을 요청하면 HTML과 CSS를 파싱하여 화면에 표시함</li>
<li>통신 : HTTP요청과 같은 네트워크 호출에 사용</li>
<li>자바스크립트 해석기 : 자바스크립트 코드를 해석하고 실행</li>
<li>UI 백엔드 :  콤보 박스와 창 같은 기본적인 장치를 그림</li>
<li>자료 저장소 : 자료 저장소 . 쿠키를 저장하는 것과 같이 모든 종류의 자원을 하드 디스크에 저장</li>
</ol>
<br/>

<h1 id="렌더링-엔진"><a href="#렌더링-엔진" class="headerlink" title="렌더링 엔진"></a>렌더링 엔진</h1><p>렌더링 엔진의 역할은 요청 받은 내용을 브라우저 화면에 표시하는것이다. HTML 이나 XML 문서, 이미지를 표시할 수 있지만 확장 기능을 통하면 PDF같은 다른 유형도 표시할 수 있다.  </p>
<p>크롬은 대부분의 브라우저와 달리 각 탭마다 별도의 렌더링 엔진 인스턴스를 유지한다. (각 탭은 독립된 프로세스로 처리)</p>
<h5> 동작 과정 </h5>

<p>렌더링 엔진은 통신으로부터 요청한 문서의 내용을 얻는 것으로 시작하는데 문서의 내용은 보통 8KB 단위로 전송된다.</p>
<p><img src="/img/%EB%A0%8C%EB%8D%94%EB%A7%81%EC%97%94%EC%A7%84%EB%8F%99%EC%9E%91.png">  </p>
<br/>

<p>우선 렌더링 엔진은 HTML문서를 파싱하고 <code>DOM 노드</code> 로 변환한다. 그 다음 외부 CSS파일과 함께 포함된 스타일 요소도 파싱한다.  스타일 정보와 DOM트리는 <code>렌더 트리</code> 라고 부르는 또 다른 트리를 생성한다.</p>
<br/>

<p>렌더 트리는 색상 또는 면적과 같은 시각적 속성이 있는 사각형을 포함하고 있는데, 정해진 순서대로 화면에 표시된다.</p>
<br/>

<p>렌더 트리 생성이 끝나면 배치가 시작되는데 이것은 각 노드가 화면의 정확한 위치에 표시되는 것을 의미한다. 다음은 UI 백엔드에서 렌더 트리의 각 노드를 가로지르며 형상을 만들어 내는 그리기 과정이다.</p>
<p><img src="/img/%EB%8F%99%EC%9E%91%EA%B3%BC%EC%A0%95.png"></p>
<blockquote>
<p>그림은 크롬의 렌더링엔진인 웹킷(Webkit)의 동작 과정이다.</p>
</blockquote>
<br/>

<p>일련의 과정들이 점진적으로 진행된다는 것이 중요하다. 렌더링 엔진은 좀 더 나은 사용자 경험을 위해 가능하면 빠르게 내용을 표시하는데 모든 HTML을 파싱할 때까지 기다리지 않고 배치와 그리기 과정을 시작한다. 네트워크로부터 나머지 내용이 전송되면 동시에 받은 내용의 일부를 먼저 화면에 표시하는 것이다.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cheal3.github.io/2020/09/09/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/%EC%9B%B9/%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80/" data-id="ckf3dt5or000nw0v47ahzhuux" class="article-share-link">공유</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-쓰레기통/react express 연동/react express 연동3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/08/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/react%20express%20%EC%97%B0%EB%8F%99/react%20express%20%EC%97%B0%EB%8F%993/" class="article-date">
  <time datetime="2020-09-08T07:17:44.000Z" itemprop="datePublished">2020-09-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%EC%9D%B8%ED%84%B4/">인턴</a>►<a class="article-category-link" href="/categories/%EC%9D%B8%ED%84%B4/React-js/">React.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/08/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/react%20express%20%EC%97%B0%EB%8F%99/react%20express%20%EC%97%B0%EB%8F%993/">React x Express 연동하여 데이터 전송하기(3)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>업데이트했어요<br>React x Express 에 Mysql 연동하기<br>================</p>
<p>이번엔 Mysql  쿼리문을 통해 데이터를 받아오는 방법을 알아보자.</p>
<p>먼저 AWS에 만들어 두었던 데이터베이스를 그대로 쓰기로 하였다.</p>
<p>REACT라는 이름의 테이블을 만들어주고 데이터를 3개 넣어주자</p>
<figure class="highlight sql"><figcaption><span>reactexample</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> REACT (</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line">	image <span class="built_in">VARCHAR</span>(<span class="number">1024</span>),</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">VARCHAR</span>(<span class="number">64</span>),</span><br><span class="line">	birthday <span class="built_in">VARCHAR</span>(<span class="number">64</span>),</span><br><span class="line">	gender <span class="built_in">VARCHAR</span>(<span class="number">64</span>),</span><br><span class="line">	job <span class="built_in">VARCHAR</span>(<span class="number">64</span>)</span><br><span class="line"></span><br><span class="line">)<span class="keyword">DEFAULT</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> REACT <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;https://placeimg.com/64/64/1&#x27;</span>, <span class="string">&#x27;최동욱&#x27;</span>, <span class="string">&#x27;921231&#x27;</span>, <span class="string">&#x27;남자&#x27;</span>, <span class="string">&#x27;대학생&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> REACT <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;https://placeimg.com/64/64/2&#x27;</span>, <span class="string">&#x27;동욱최&#x27;</span>, <span class="string">&#x27;951211&#x27;</span>, <span class="string">&#x27;남자&#x27;</span>, <span class="string">&#x27;프로그래머&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> REACT <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">&#x27;https://placeimg.com/64/64/3&#x27;</span>, <span class="string">&#x27;욱동최&#x27;</span>, <span class="string">&#x27;911215&#x27;</span>, <span class="string">&#x27;남자&#x27;</span>, <span class="string">&#x27;기획자&#x27;</span>);</span><br></pre></td></tr></table></figure>    

<p>MySQL Workbench에서 확인해 보면 잘 생성된 것을 확인할 수 있다.</p>
<p><img src="/img/db%EC%97%B0%EB%8F%991.png">    </p>
<p>이후에 database.json에서 데이터베이스 정보를 설정해 주자.</p>
<figure class="highlight json"><figcaption><span>database.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">&quot;host&quot;</span>: <span class="string">&quot;데이터베이스 주소&quot;</span>,  <span class="comment">// AWS 엔드포인트</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">&quot;user&quot;</span>: <span class="string">&quot;데이터베이스 사용자&quot;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;데이터베이스 비밀번호&quot;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">&quot;port&quot;</span>: <span class="string">&quot;3306&quot;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">&quot;database&quot;</span>: <span class="string">&quot;데이터베이스 이름&quot;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  


<br/>

<p>npm을 이용하여 MySQL 라이브러리를 설치해주자.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -S mysql</span><br></pre></td></tr></table></figure>



<p> <code>index.js</code> 에 데이터베이스를 연결하는 코드를 작성하자  </p>
<figure class="highlight javascript"><figcaption><span>index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> router = express.Router();</span><br><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> data = fs.readFileSync(<span class="string">&#x27;./database.json&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> conf = <span class="built_in">JSON</span>.parse(data);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> connection = mysql.createConnection(&#123;</span><br><span class="line">  host: conf.host,</span><br><span class="line">  user: conf.user,</span><br><span class="line">  password: conf.password,</span><br><span class="line">  port: conf.port,</span><br><span class="line">  database: conf.database</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req,res</span>) =&gt;</span> res.json (&#123;<span class="attr">username</span>: <span class="string">&#x27;테스트&#x27;</span>&#125;))</span><br><span class="line">router.get(<span class="string">&#x27;/test&#x27;</span>, <span class="function">(<span class="params">req,res</span>) =&gt;</span> res.json (&#123;<span class="attr">username</span>: <span class="string">&#x27;test&#x27;</span>&#125;))</span><br><span class="line">router.get(<span class="string">&#x27;/react&#x27;</span>,<span class="function">(<span class="params">req,res</span>) =&gt;</span>&#123;</span><br><span class="line">  connection.connect();</span><br><span class="line">  connection.query(</span><br><span class="line">​    <span class="string">&#x27;SELECT * FROM REACT&#x27;</span>,</span><br><span class="line">​    (err , rows, fields) =&gt;&#123;</span><br><span class="line">​      res.json(rows) &#125;</span><br><span class="line">​      )&#125;);</span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure>  









<p><code>App.js</code>에 가서 테스트를 위해 기존의 코드들을 변경하자.</p>
<figure class="highlight javascript"><figcaption><span>App.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> logo <span class="keyword">from</span> <span class="string">&#x27;./logo.svg&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state=&#123;</span><br><span class="line">      id:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      image:<span class="literal">null</span>,</span><br><span class="line">      name:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      birthday:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      job:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount()&#123;</span><br><span class="line">    fetch(<span class="string">&#x27;api/react&#x27;</span>)</span><br><span class="line">    .then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span><br><span class="line"></span><br><span class="line">    .then(<span class="function"><span class="params">data</span> =&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">     <span class="built_in">console</span>.log(data[<span class="number">0</span>].id) <span class="comment">//개발자도구에서 확인 가능</span></span><br><span class="line">     <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      id:data[<span class="number">0</span>].id,</span><br><span class="line">      image:data[<span class="number">0</span>].image,</span><br><span class="line">      name:data[<span class="number">0</span>].name,</span><br><span class="line">      birthday:data[<span class="number">0</span>].birthday,</span><br><span class="line">      job:data[<span class="number">0</span>].job,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    )</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.state);&#125;)&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  render()&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">      &lt;header className=<span class="string">&quot;App-header&quot;</span>&gt;</span><br><span class="line">        &lt;img src=&#123;logo&#125; className=<span class="string">&quot;App-logo&quot;</span> alt=<span class="string">&quot;logo&quot;</span> /&gt;</span><br><span class="line">        &#123; <span class="string">`Hello <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(<span class="built_in">this</span>.state)&#125;</span>`</span> &#125;</span><br><span class="line">      &lt;/header&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>  



<blockquote>
<p><code>JSON.stringify</code> 는 object 파일을 있는 그대로 출력할 때 사용한다.</p>
</blockquote>
<p><img src="/img/db%EC%97%B0%EB%8F%992.png">    </p>
<p>데이터를 하드코딩으로 한 줄만 불러왔는데 <code>componentDidMount</code> 에서 Map을 사용한다면 여러개를 받아올 수 있을 것이다.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cheal3.github.io/2020/09/08/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/react%20express%20%EC%97%B0%EB%8F%99/react%20express%20%EC%97%B0%EB%8F%993/" data-id="ckf3rbu1n0019w0v45czf46rs" class="article-share-link">공유</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-쓰레기통/react express 연동/react express 연동2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/08/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/react%20express%20%EC%97%B0%EB%8F%99/react%20express%20%EC%97%B0%EB%8F%992/" class="article-date">
  <time datetime="2020-09-08T05:11:55.000Z" itemprop="datePublished">2020-09-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%EC%9D%B8%ED%84%B4/">인턴</a>►<a class="article-category-link" href="/categories/%EC%9D%B8%ED%84%B4/React-js/">React.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/08/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/react%20express%20%EC%97%B0%EB%8F%99/react%20express%20%EC%97%B0%EB%8F%992/">React x Express 연동하여 데이터 전송하기(2)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="React-x-Express-연동하기"><a href="#React-x-Express-연동하기" class="headerlink" title="React x Express 연동하기"></a>React x Express 연동하기</h1><p>이번엔 클라이언트와 서버를 한번에 시작하는 방법을 알아보자</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install npm-run-all --save</span><br></pre></td></tr></table></figure>



<blockquote>
<p><code>cannot read property &#39;match&#39; of undefined  </code> 에러가 나와서 <code>package-lock.json</code> 파일을 지워주고 다시 실행하였더니 정상 작동하였다.</p>
</blockquote>
<p>그런다음 root 디렉터리에서 <code>package.json</code> 파일을 열어서 <code>scripts</code> 부분을 수정하자  </p>
<figure class="highlight json"><figcaption><span>package.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line"></span><br><span class="line">  &quot;start&quot;: &quot;npm-run-all --parallel start:**&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;start:client&quot; : &quot;react-scripts start&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;start:server&quot; : &quot;node ./servers/server.js&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;build&quot;: &quot;react-scripts build&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;test&quot;: &quot;react-scripts test&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;eject&quot;: &quot;react-scripts eject&quot;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>  







<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm start</span><br></pre></td></tr></table></figure>

<p>이제 클라이언트를 실행하면  서버까지 같이 실행되는 것을 확인할 수 있다 .</p>
<p><img src="/img/react%EC%97%B0%EB%8F%995.png">    </p>
<h2>Proxy 사용</h2>

<p>서버 url 호출 부분을 조금 보기좋게 변경해보자</p>
<figure class="highlight javascript"><figcaption><span>App.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">componentDidMount()&#123;</span><br><span class="line"></span><br><span class="line">  fetch(<span class="string">&#x27;api&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span><br><span class="line"></span><br><span class="line">  .then(<span class="function"><span class="params">data</span> =&gt;</span> <span class="built_in">this</span>.setState(&#123;<span class="attr">username</span>:data.username&#125;));</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>  





<p>다음으로 proxy 설정을 해주자</p>
<blockquote>
<p>프록시 :다른 서버 상의 자원을 찾는 클라이언트로부터 요청을 받아 중계하는 서버</p>
<p> 출처: 네이버 지식백과</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install http-proxy-middleware --save</span><br></pre></td></tr></table></figure>

<p>그리고 src 디렉터리 아래에 <code>setupProxy.js</code> 를 생성하고 다음과 같이 작성하자</p>
<figure class="highlight javascript"><figcaption><span>setupProxy.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> proxy = <span class="built_in">require</span>(<span class="string">&#x27;http-proxy-middleware&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function">(<span class="params">app</span>) =&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">  app.use(</span><br><span class="line"></span><br><span class="line">​    proxy.createProxyMiddleware(<span class="string">&#x27;/api&#x27;</span>, &#123;</span><br><span class="line"></span><br><span class="line">​      target: <span class="string">&#x27;http://localhost:5000/&#x27;</span>,</span><br><span class="line"></span><br><span class="line">​      changeOrigin: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">​    &#125;)</span><br><span class="line"></span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>  





<p>테스트하기 위해서 server.js에서 cors와 관련된 부분을 주석처리 해주자.</p>
<figure class="highlight javascript"><figcaption><span>server.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">. . .</span><br><span class="line"></span><br><span class="line"><span class="comment">//const cors = require(&#x27;cors&#x27;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//app.use(cors());</span></span><br><span class="line"></span><br><span class="line">. . .</span><br><span class="line"></span><br></pre></td></tr></table></figure>  



<p>  마찬가지로 잘 나오는 것을 확인할 수 있다.</p>
<p><img src="/img/react%EC%97%B0%EB%8F%996.png">    </p>
<p>실제 프로젝트에서는 서버쪽에서 api 를 하나만 제공하지 않을 것이다.</p>
<p>더 많은 api를 만들기 위해 <code>server.js</code> 에 route를 적용하자.  servers 폴더 아래 routes 디렉터리를 만들고 <code>index.js</code>를 만들자</p>
<figure class="highlight javascript"><figcaption><span>server.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = express.Router();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req,res</span>) =&gt;</span> res.json (&#123;<span class="attr">username</span>: <span class="string">&#x27;route&#x27;</span>&#125;))</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/test&#x27;</span>, <span class="function">(<span class="params">req,res</span>) =&gt;</span> res.json (&#123;<span class="attr">username</span>: <span class="string">&#x27;test&#x27;</span>&#125;))</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br><span class="line"></span><br></pre></td></tr></table></figure>  





<p>그리고 server.js를 수정해보자.</p>
<figure class="highlight javascript"><figcaption><span>server.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> port = process.env.PORT || <span class="number">5000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> route = <span class="built_in">require</span>(<span class="string">&#x27;./routes/index&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//const cors = require(&#x27;cors&#x27;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//app.use(cors());</span></span><br><span class="line"></span><br><span class="line">app.use(bodyParser.json());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.use(<span class="string">&#x27;/api&#x27;</span>, route); <span class="comment">// app.use(&#x27;/api&#x27; , (req,res) =&gt; res.json (&#123;username: &#x27;테스트&#x27;&#125;));</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.listen(port , <span class="function">() =&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`express is running on <span class="subst">$&#123;port&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>  

<p><code>app.use(&#39;/api&#39; , route);</code> 를 통해    <code>/api</code> 로 오는 요청은 전부 route에서 처리하게 하였다.</p>
<p>만약 <code>App.js</code>  를 다음과 같이 수정한다고 해보면</p>
<figure class="highlight javascript"><figcaption><span>App.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">componentDidMount()&#123;</span><br><span class="line"></span><br><span class="line"> fetch(<span class="string">&#x27;api/test&#x27;</span>)</span><br><span class="line"></span><br><span class="line"> .then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span><br><span class="line"></span><br><span class="line"> .then(<span class="function"><span class="params">data</span> =&gt;</span> <span class="built_in">this</span>.setState(&#123;<span class="attr">username</span>:data.username&#125;));</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>  





<p>클라이언트가   <code>localhost:5000/api/test</code> 에서 데이터를 받아오게 되는데  먼저 <code>server.js</code> 의 <strong>app.use(‘/api’ , route);</strong> 에 걸리고 <code>index.js</code> 의 <strong>router.get(‘/test’, (req,res) =&gt; res.json ({username: ‘test’}))</strong>  에 최종적으로 도착하여 test라는  username을 받아오게 된다.  </p>
<p><strong>결과 화면</strong></p>
<p><img src="/img/react%EC%97%B0%EB%8F%997.png">  </p>
<blockquote>
<p>출처 : <a target="_blank" rel="noopener" href="https://hello-bryan.tistory.com/122">https://hello-bryan.tistory.com/122</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cheal3.github.io/2020/09/08/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/react%20express%20%EC%97%B0%EB%8F%99/react%20express%20%EC%97%B0%EB%8F%992/" data-id="ckf3rbu1s001ew0v44x9kclis" class="article-share-link">공유</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-쓰레기통/react express 연동/react express 연동" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/08/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/react%20express%20%EC%97%B0%EB%8F%99/react%20express%20%EC%97%B0%EB%8F%99/" class="article-date">
  <time datetime="2020-09-08T02:09:25.000Z" itemprop="datePublished">2020-09-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%EC%9D%B8%ED%84%B4/">인턴</a>►<a class="article-category-link" href="/categories/%EC%9D%B8%ED%84%B4/React-js/">React.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/08/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/react%20express%20%EC%97%B0%EB%8F%99/react%20express%20%EC%97%B0%EB%8F%99/">React x Express 연동하여 데이터 전송하기</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="React-x-Express-연동하기"><a href="#React-x-Express-연동하기" class="headerlink" title="React x Express 연동하기"></a>React x Express 연동하기</h1><p>우선 CRA를 통해 리액트 프로젝트를 시작하자.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app react_express</span><br><span class="line">cd react_express</span><br><span class="line">npm start</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>npx</strong>는 반복되지만 자주 쓰이는 형태 (보일러플레이트) 에 효과적이다   </p>
<p> 최신버전에 해당하는 패키지를 설치하여 실행하고, 실행된 이후에 해당 패키지를 제거한다.  </p>
</blockquote>
<p>그럼 익숙한 창이 나온다.</p>
<p><img src="/img/react%EC%97%B0%EB%8F%99.png">    </p>
<p>  그런다음  src 아래에 있는 <code>App.js</code> 를 수정하자</p>
<figure class="highlight javascript"><figcaption><span>App.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> logo <span class="keyword">from</span> <span class="string">&#x27;./logo.svg&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state=&#123;</span><br><span class="line">      username:<span class="literal">null</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  render()&#123;</span><br><span class="line">      <span class="keyword">const</span> &#123;username&#125; = <span class="built_in">this</span>.state;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        &lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">          &lt;header className=<span class="string">&quot;App-header&quot;</span>&gt;</span><br><span class="line">            &lt;img src=&#123;logo&#125; className=<span class="string">&quot;App-logo&quot;</span> alt=<span class="string">&quot;logo&quot;</span> /&gt;</span><br><span class="line">            &#123;username ? <span class="string">`Hello <span class="subst">$&#123;username&#125;</span>`</span> : <span class="string">&#x27;Hello World&#x27;</span>&#125;</span><br><span class="line">          &lt;/header&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"> 		 );</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>      





<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username ? &#96;Hello $&#123;username&#125;&#96; : &#39;Hello World&#39;</span><br></pre></td></tr></table></figure>

<p>에서  username 이 <code>null</code> 이기 때문에  <code>Hello world</code> 가 출력 됨은 자명하다. 그럼 이 username 을 express로 만든 서버에서 받아오도록 하자  </p>
<p>서버쪽을 구현하기 위해 express를 설치해 주자</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm add express --save</span><br></pre></td></tr></table></figure>



<p>json형식으로 데이터를 주고받기 위해 <code>body-parser</code>도 설치해준다</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install body-parser</span><br></pre></td></tr></table></figure>



<p>root에서 servers라는 디렉터리를 만들고 <code>server.js</code>파일을 생성하고 다음과 같이 작성하자.</p>
<figure class="highlight javascript"><figcaption><span>server.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="keyword">const</span> bodyParser =  <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> port = process.env.PORT || <span class="number">5000</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.use(bodyParser.json());</span><br><span class="line">app.use(<span class="string">&#x27;/api&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>   &#123;</span><br><span class="line">    res.json(&#123;<span class="attr">username</span>:<span class="string">&#x27;dongwook&#x27;</span>&#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(port , <span class="function">() =&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`express is running on <span class="subst">$&#123;port&#125;</span>`</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>     



<p><code>localhost:5000/api</code>  에 접속해 주면 다음과 같은 결과가 나온다.</p>
<p><img src="/img/react%EC%97%B0%EB%8F%992.png">    </p>
<p>이제 client 쪽에서 이 데이터를 받아오게 하면 된다.</p>
<p><code>App.js</code>에서 <code>componentDidMount()</code>를 추가한다.</p>
<blockquote>
<p><strong>React의 라이프 사이클</strong></p>
<p>기본적으로 React 라이브러리가 처음 컴포넌트를 실행할 때는 다음순서를 따른다.</p>
<ol>
<li><p>constructor()</p>
</li>
<li><p>componentWillMount()</p>
</li>
<li><p>render()</p>
</li>
<li><p>componentDidMount()</p>
<p>그리고 props혹은 state가 변경될 때는 shouldComponentUpdate() 함수 등이 사용되어 실질적으로 render 함수를 불러와 뷰를 갱신하게 된다. 또한 컴포넌트가 삭제될 때는 componentWillUnmount 함수가 실행된다.</p>
<p>일반적으로 API를 불러와서 웹 사이트 화면에 특정한 뷰를 출력하고자 한다면 <code>componentDidMount()</code> 함수에서 API를 비동기적으로 호출하면 된다.</p>
</li>
</ol>
</blockquote>
<figure class="highlight javascript"><figcaption><span>App.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">componentDidMoint()&#123;</span><br><span class="line">	fetch(<span class="string">&#x27;http://localhost:5000/api&#x27;</span>)</span><br><span class="line">	.then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span><br><span class="line">	.then(<span class="function"><span class="params">data</span> =&gt;</span> <span class="built_in">this</span>.setState(&#123;<span class="attr">username</span>: data.username&#125;));</span><br><span class="line">&#125;</span><br><span class="line">render()&#123;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>     





<p>이제 클라이언트에서 접속을하고 개발자 도구의 console로 들어가 보면 다음과 같이 에러가 떠있다.</p>
<p><img src="/img/react%EC%97%B0%EB%8F%993.png"></p>
<p>CORS 정책에 의해서 다른 포트나 다른 도메인에서 온 요청을 허용하지 않는것인데 server.js에서 cors를 허용하는 방법으로 변경해 보자. 먼저 cors를 설치해주고</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install cors --save</span><br></pre></td></tr></table></figure>



<p>  server.js에 다음 두 줄을 추가해주자.</p>
<figure class="highlight javascript"><figcaption><span>server.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">&#x27;cors&#x27;</span>);</span><br><span class="line"></span><br><span class="line">app.use(cors());</span><br></pre></td></tr></table></figure>       





<p>그런 다음 서버를 재시작하면 제대로 데이터가 전달 된 것을 확인할 수 있다.</p>
<p><img src="/img/react%EC%97%B0%EB%8F%994.png"></p>
<blockquote>
<p>출처 : <a target="_blank" rel="noopener" href="https://hello-bryan.tistory.com/121?category=695724">https://hello-bryan.tistory.com/121?category=695724</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cheal3.github.io/2020/09/08/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/react%20express%20%EC%97%B0%EB%8F%99/react%20express%20%EC%97%B0%EB%8F%99/" data-id="ckf3rbu1f0018w0v4aydt4bu5" class="article-share-link">공유</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-쓰레기통/고객관리예제 공부/project-13" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/04/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/%EA%B3%A0%EA%B0%9D%EA%B4%80%EB%A6%AC%EC%98%88%EC%A0%9C%20%EA%B3%B5%EB%B6%80/project-13/" class="article-date">
  <time datetime="2020-09-04T05:58:49.000Z" itemprop="datePublished">2020-09-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/">쓰레기통</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/04/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/%EA%B3%A0%EA%B0%9D%EA%B4%80%EB%A6%AC%EC%98%88%EC%A0%9C%20%EA%B3%B5%EB%B6%80/project-13/">React와 Node.js로 만드는 고객 관리 시스템 개발-13</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="부모-컴포넌트의-State변경을-통한-고객-정보-갱신"><a href="#부모-컴포넌트의-State변경을-통한-고객-정보-갱신" class="headerlink" title="부모 컴포넌트의 State변경을 통한 고객         정보 갱신"></a>부모 컴포넌트의 State변경을 통한 고객         정보 갱신</h1><p>지금까지는 정보가 추가되면 새로고침을 통해서 확인할 수 있었다. 하지만 리액트는 기본적으로 <strong>SPA(Single Page Application)</strong> 구조로 동작하므로 전체 페이지를 새로고침하는 것은 비효율적이다.</p>
<p>이럴때는 고객 추가(Customer Add) 컴포넌트에서 부모 컴포넌트의 State를 변경하는 식으로 필요한 부분만 새로고침 하도록 설정하면 된다. (Props를 전달)  </p>
<h2>전체 고객 목록 다시 불러오기 </h2>

<p>가장 대표적인 방법은 전체 고객 목록을 다시 불러옴으로써 State를 갱신하는 방식이다.</p>
<p><code>App.js</code> 를 다음과 같이 변경하자</p>
<figure class="highlight javascript"><figcaption><span>App.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;Component&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Customer <span class="keyword">from</span> <span class="string">&#x27;./components/Customer&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Paper <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/Paper&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Table <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/Table&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TableHead <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/TableHead&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TableBody <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/TableBody&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TableRow <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/TableRow&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TableCell <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/TableCell&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> CircularProgress <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/CircularProgress&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; withStyles &#125; <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/styles&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> CustomerAdd <span class="keyword">from</span> <span class="string">&#x27;./components/CustomerAdd&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styles = <span class="function"><span class="params">theme</span> =&gt;</span> (&#123;</span><br><span class="line">  root: &#123;</span><br><span class="line">    width: <span class="string">&quot;100%&quot;</span>,</span><br><span class="line">    marginTop: theme.spacing.unit * <span class="number">3</span>,</span><br><span class="line">    overflowX: <span class="string">&quot;auto&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    table: &#123;</span><br><span class="line">      minWidth: <span class="number">1080</span></span><br><span class="line">    &#125;,</span><br><span class="line">    progress:&#123;</span><br><span class="line">      margin: theme.spacing.unit *<span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state= &#123;</span><br><span class="line">      customers: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      completed: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.stateRefresh = <span class="built_in">this</span>.stateRefresh.bind(<span class="built_in">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  stateRefresh()&#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      customers:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      completed: <span class="number">0</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">this</span>.callApi()</span><br><span class="line">    .then(<span class="function"><span class="params">res</span> =&gt;</span> <span class="built_in">this</span>.setState(&#123;<span class="attr">customers</span>: res&#125;))</span><br><span class="line">    .catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.log(err));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount()&#123;</span><br><span class="line">    <span class="built_in">this</span>.timer = <span class="built_in">setInterval</span>(<span class="built_in">this</span>.progress,<span class="number">20</span>);</span><br><span class="line">    <span class="built_in">this</span>.callApi()</span><br><span class="line">      .then(<span class="function"><span class="params">res</span> =&gt;</span> <span class="built_in">this</span>.setState(&#123;<span class="attr">customers</span>:res&#125;))</span><br><span class="line">      .catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.log(err));</span><br><span class="line">  &#125;</span><br><span class="line">  componentWillUnmount()&#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timer);</span><br><span class="line">  &#125;</span><br><span class="line">  callApi = <span class="keyword">async</span>() =&gt;&#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(<span class="string">&#x27;/api/customers&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> body = <span class="keyword">await</span> response.json();</span><br><span class="line">    <span class="keyword">return</span> body;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  progress = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;completed &#125; = <span class="built_in">this</span>.state;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123; <span class="attr">completed</span>:completed &gt;=<span class="number">100</span>?<span class="number">0</span> : completed +<span class="number">1</span>&#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  render()&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> &#123; classes &#125; = <span class="built_in">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">      &lt;Paper className = &#123;classes.root&#125;&gt;</span><br><span class="line">        &lt;Table className = &#123;classes.table&#125;&gt;</span><br><span class="line">          &lt;TableHead&gt;</span><br><span class="line">            &lt;TableRow&gt;</span><br><span class="line">              &lt;TableCell&gt; 번호 &lt;/TableCell&gt;</span><br><span class="line">              &lt;TableCell&gt; 이미지 &lt;/TableCell&gt;</span><br><span class="line">              &lt;TableCell&gt; 이름 &lt;/TableCell&gt;</span><br><span class="line">              &lt;TableCell&gt; 생년월일 &lt;/TableCell&gt;</span><br><span class="line">              &lt;TableCell&gt; 성별 &lt;/TableCell&gt;</span><br><span class="line">              &lt;TableCell&gt; 직업 &lt;/TableCell&gt;</span><br><span class="line">            &lt;/TableRow&gt;</span><br><span class="line">          &lt;/TableHead&gt;</span><br><span class="line">          &lt;TableBody&gt;</span><br><span class="line">          &#123;<span class="built_in">this</span>.state.customers ?</span><br><span class="line">            <span class="built_in">this</span>.state.customers.map(<span class="function"><span class="params">c</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Customer</span> <span class="attr">key</span>=<span class="string">&#123;c.id&#125;</span> <span class="attr">id</span>=<span class="string">&#123;c.id&#125;</span> <span class="attr">image</span>=<span class="string">&#123;c.image&#125;</span> <span class="attr">name</span>=<span class="string">&#123;c.name&#125;</span> <span class="attr">birthday</span>=<span class="string">&#123;c.birthday&#125;</span> <span class="attr">gender</span>=<span class="string">&#123;c.gender&#125;</span> <span class="attr">job</span>=<span class="string">&#123;c.job&#125;</span> /&gt;</span></span></span><br><span class="line">            &#125;) :</span><br><span class="line">            &lt;TableRow&gt;</span><br><span class="line">              &lt;TableCell colSpan=<span class="string">&quot;6&quot;</span> align=<span class="string">&quot;center&quot;</span>&gt;</span><br><span class="line">              &lt;CircularProgress className=&#123;classes.progress&#125; variant=<span class="string">&quot;determinate&quot;</span> value=&#123;<span class="built_in">this</span>.state.completed&#125; /&gt;</span><br><span class="line">              &lt;/TableCell&gt;</span><br><span class="line">          &lt;/TableRow&gt;</span><br><span class="line">        &#125;</span><br><span class="line">          &lt;/TableBody&gt;</span><br><span class="line">      &lt;/Table&gt;</span><br><span class="line">    &lt;/Paper&gt;</span><br><span class="line">    &lt;CustomerAdd stateRefresh=&#123;<span class="built_in">this</span>.stateRefresh&#125;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> withStyles(styles)(App);</span><br></pre></td></tr></table></figure>    



<p>CustomerAdd 컴포넌트로 stateRefresh()함수를 보내면 CustomerAdd 컴포넌트가 부모 컴포넌트인 App 컴포넌트의 State를 갱신하게 된다.  </p>
<p>CustomerAdd.js에 가서 <code>window.location.reload()</code> 함수를 제거하고 다음의 구문을 넣자.</p>
<figure class="highlight javascript"><figcaption><span>CustomerAdd.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.props.stateRefresh();</span><br></pre></td></tr></table></figure>  





<p>다만 고객 목록 데이터를 불러오는 과정은 비동기적으로 수행된다는 점에서 항상 고객 데이터를 추가한 이후에 고객 목록 데이터를 불러온다는 것을 보장하지 못한다. 따라서 다음과 같이 고객 추가 이후에 서버로부터 응답을 받고 나서 고객 목록을 다시 불러오도록 설정해야한다</p>
<figure class="highlight javascript"><figcaption><span>CustomerAdd.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">handleFormSubmit(e)&#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">    <span class="built_in">this</span>.addCustomer()</span><br><span class="line">    .then(<span class="function">(<span class="params">response</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(response.data);</span><br><span class="line">      <span class="built_in">this</span>.props.stateRefresh();</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      file: <span class="literal">null</span>,</span><br><span class="line">      userName: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      birthday: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      gender: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      job: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      fileName: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>  

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cheal3.github.io/2020/09/04/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/%EA%B3%A0%EA%B0%9D%EA%B4%80%EB%A6%AC%EC%98%88%EC%A0%9C%20%EA%B3%B5%EB%B6%80/project-13/" data-id="ckf3dt5oc0005w0v4ao452t02" class="article-share-link">공유</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-쓰레기통/고객관리예제 공부/project-12" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/04/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/%EA%B3%A0%EA%B0%9D%EA%B4%80%EB%A6%AC%EC%98%88%EC%A0%9C%20%EA%B3%B5%EB%B6%80/project-12/" class="article-date">
  <time datetime="2020-09-04T05:15:21.000Z" itemprop="datePublished">2020-09-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/">쓰레기통</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/04/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/%EA%B3%A0%EA%B0%9D%EA%B4%80%EB%A6%AC%EC%98%88%EC%A0%9C%20%EA%B3%B5%EB%B6%80/project-12/">React와 Node.js로 만드는 고객 관리 시스템 개발-12</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Express-에서-파일-업로드-요청-처리-및-DB-데이터-삽입"><a href="#Express-에서-파일-업로드-요청-처리-및-DB-데이터-삽입" class="headerlink" title="Express 에서 파일 업로드 요청 처리 및 DB 데이터 삽입"></a>Express 에서 파일 업로드 요청 처리 및 DB 데이터 삽입</h1><p>사용자가 보낸 고객 데이터를 Node.js Express로 처리하여 서버의 특정한 폴더에 업로드 하는 방법에 대해서 알아보자. 이후에 MySQL DB에 삽입하고 , 클라이언트에서 접근할 수 있도록 처리해보자.</p>
<p>먼저 CustomerAdd.js의 <code>handleFormSubmit()</code> 을 수정해주자. 데이터를 전송한 이후에 고객 추가 양식을 비운 뒤 페이지를 새로고침하여 고객 데이터를 확인하는 것이다. 실제 배포 버전에서는 이런쪽으로 코딩하면 안되지만 빠른 테스트를 위해서 해보자.</p>
<figure class="highlight javascript"><figcaption><span>CustomerAdd.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">handleFormSubmit(e)&#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">    <span class="built_in">this</span>.addCustomer()</span><br><span class="line">    .then(<span class="function">(<span class="params">response</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(response.data);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      file: <span class="literal">null</span>,</span><br><span class="line">      userName: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      birthday: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      gender: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      job: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      fileName: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">window</span>.location.reload();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>





<p>이제 node.js에서 이러한 파일 업로드 요청을 처리하면 된다. 이 때 <strong>multer</strong> 라이브러리를 사용하므로</p>
<p>루트 디렉터리에서 다음과 같이 명령어 입력하자 그리고 upload 폴더를 생성하자</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --save multer</span><br><span class="line">mkdir upload</span><br></pre></td></tr></table></figure>



<p>그 다음 <code>server.js</code> 도 수정해 주자.</p>
<figure class="highlight javascript"><figcaption><span>server.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="keyword">const</span> port = process.env.PORT || <span class="number">5000</span>;</span><br><span class="line">app.use(bodyParser.json());</span><br><span class="line">app.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>: <span class="literal">true</span>&#125;));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> data = fs.readFileSync(<span class="string">&#x27;./database.json&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> conf = <span class="built_in">JSON</span>.parse(data);</span><br><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> multer = <span class="built_in">require</span>(<span class="string">&#x27;multer&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> upload = multer(&#123;<span class="attr">dest</span>:<span class="string">&#x27;./upload&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> connection = mysql.createConnection(&#123;</span><br><span class="line">  host : conf.host,</span><br><span class="line">  user : conf.user,</span><br><span class="line">  password: conf.password,</span><br><span class="line">  port : conf.port,</span><br><span class="line">  database: conf.database</span><br><span class="line">&#125;);</span><br><span class="line">connection.connect();</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/api/customers&#x27;</span>, <span class="function">(<span class="params">req,res</span>) =&gt;</span>&#123;</span><br><span class="line">  connection.query(</span><br><span class="line">    <span class="string">&#x27;SELECT * FROM CUSTOMER&#x27;</span>,</span><br><span class="line">    (err , rows, fields) =&gt; &#123;</span><br><span class="line">      res.send(rows);</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.use(<span class="string">&#x27;/image&#x27;</span>,express.static(<span class="string">&#x27;./upload&#x27;</span>));</span><br><span class="line"></span><br><span class="line">app.post(<span class="string">&#x27;/api/customers&#x27;</span>, upload.single(<span class="string">&#x27;image&#x27;</span>),<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> sql = <span class="string">&quot;INSERT INTO CUSTOMER VALUES (null,?,?,?,?,?)&quot;</span>;</span><br><span class="line">  <span class="keyword">let</span> image= <span class="string">&#x27;/image/&#x27;</span> + req.file.filename;</span><br><span class="line">  <span class="keyword">let</span> name = req.body.name;</span><br><span class="line">  <span class="keyword">let</span> birthday = req.body.birthday;</span><br><span class="line">  <span class="keyword">let</span> gender = req.body.gender;</span><br><span class="line">  <span class="keyword">let</span> job = req.body.job;</span><br><span class="line">  <span class="keyword">let</span> params = [image, name , birthday , gender , job];</span><br><span class="line">  connection.query(sql,params,</span><br><span class="line">  (err,rows,fields)=&gt; &#123;</span><br><span class="line">    res.send(rows);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br><span class="line">app.listen(port, <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`Listening on port <span class="subst">$&#123;port&#125;</span>`</span>));</span><br></pre></td></tr></table></figure>





<p>그런 다음  <code>.gitignore</code> 에 upload 폴더를 추가해 주자.</p>
<figure class="highlight plain"><figcaption><span>.gitignore</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># upload</span><br><span class="line">&#x2F;upload</span><br></pre></td></tr></table></figure>  



<p><strong>결과 화면</strong></p>
<p><img src="/img/12%EC%B6%94%EA%B0%80.png">    </p>
<p><img src="/img/12%EA%B2%B0%EA%B3%BC.png">  </p>
<p><img src="/img/12%EA%B2%B0%EA%B3%BC2.png">  </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cheal3.github.io/2020/09/04/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/%EA%B3%A0%EA%B0%9D%EA%B4%80%EB%A6%AC%EC%98%88%EC%A0%9C%20%EA%B3%B5%EB%B6%80/project-12/" data-id="ckf3dt5ob0004w0v4aqnwa9hz" class="article-share-link">공유</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-쓰레기통/고객관리예제 공부/project-11" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/04/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/%EA%B3%A0%EA%B0%9D%EA%B4%80%EB%A6%AC%EC%98%88%EC%A0%9C%20%EA%B3%B5%EB%B6%80/project-11/" class="article-date">
  <time datetime="2020-09-04T02:45:45.000Z" itemprop="datePublished">2020-09-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/">쓰레기통</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/04/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/%EA%B3%A0%EA%B0%9D%EA%B4%80%EB%A6%AC%EC%98%88%EC%A0%9C%20%EA%B3%B5%EB%B6%80/project-11/">React와 Node.js로 만드는 고객 관리 시스템 개발-11</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="고객-추가-양식-구현하기"><a href="#고객-추가-양식-구현하기" class="headerlink" title="고객 추가 양식 구현하기"></a>고객 추가 양식 구현하기</h1><p>React에서 <em>Form</em> 을 처리하기 위해서는 <em>Event Handling</em> 을 수행해야 한다. 이번에는 서버로 고객 데이터를 전송하여 데이터베이스에 신규 고객 정보를 등록하는 방법을 알아보자.</p>
<p>먼저 React 클라이언트의 components 폴더에 <code>CustomerAdd.js</code> 를 만들자.</p>
<p>그 다음 서버와의 통신 목적의 라이브러리 <strong>axios</strong> 를 설치해 주자. client 폴더로 이동하여 아래와 같이 입력해주자</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save axios</span><br></pre></td></tr></table></figure>



<p>그 다음 <code>CustomerAdd.js</code> 를 작업해 주자.</p>
<figure class="highlight javascript"><figcaption><span>CustomerAdd.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;post&#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomerAdd</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state= &#123;</span><br><span class="line">      file:<span class="literal">null</span>,</span><br><span class="line">      userName:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      birthday:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      gender: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      job: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      fileName:<span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.handleFormSubmit = <span class="built_in">this</span>.handleFormSubmit.bind(<span class="built_in">this</span>)</span><br><span class="line">    <span class="built_in">this</span>.handleFileChange = <span class="built_in">this</span>.handleFileChange.bind(<span class="built_in">this</span>)</span><br><span class="line">    <span class="built_in">this</span>.handleValueChange = <span class="built_in">this</span>.handleValueChange.bind(<span class="built_in">this</span>)</span><br><span class="line">    <span class="built_in">this</span>.addCustomer = <span class="built_in">this</span>.addCustomer.bind(<span class="built_in">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleFormSubmit(e)&#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">    <span class="built_in">this</span>.addCustomer()</span><br><span class="line">    .then(<span class="function">(<span class="params">response</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(response.data);</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleFileChange(e)&#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      file: e.target.files[<span class="number">0</span>],</span><br><span class="line">      fileName: e.target.value</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  handleValueChange(e)&#123;</span><br><span class="line">    <span class="keyword">let</span> nextState =&#123;&#125;;</span><br><span class="line">    nextState[e.target.name] = e.target.value;</span><br><span class="line">    <span class="built_in">this</span>.setState(nextState);</span><br><span class="line">  &#125;</span><br><span class="line">  addCustomer()&#123;</span><br><span class="line">    <span class="keyword">const</span> url = <span class="string">&#x27;/api/customers&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> formData = <span class="keyword">new</span> FormData();</span><br><span class="line">    formData.append(<span class="string">&#x27;image&#x27;</span>,<span class="built_in">this</span>.state.file)</span><br><span class="line">    formData.append(<span class="string">&#x27;name&#x27;</span>,<span class="built_in">this</span>.state.userName)</span><br><span class="line">    formData.append(<span class="string">&#x27;birthday&#x27;</span>,<span class="built_in">this</span>.state.birthday)</span><br><span class="line">    formData.append(<span class="string">&#x27;gender&#x27;</span>,<span class="built_in">this</span>.state.gender)</span><br><span class="line">    formData.append(<span class="string">&#x27;job&#x27;</span>,<span class="built_in">this</span>.state.job)</span><br><span class="line">    <span class="keyword">const</span> config = &#123;</span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;multipart/form-data&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> post(url,formData,config)</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"></span><br><span class="line">      &lt;form onSubmit=&#123;<span class="built_in">this</span>.handleFormSubmit&#125;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;h1&gt;고객 추가&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">      프로필 이미지: <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span> <span class="attr">file</span>=<span class="string">&#123;this.state.file&#125;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.fileName&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleFileChange&#125;</span> /&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"></span><br><span class="line">      이름: <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;userName&quot;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.userName&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleValueChange&#125;</span> /&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"></span><br><span class="line">      생년월일: <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;birthday&quot;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.birthday&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleValueChange&#125;</span> /&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"></span><br><span class="line">      성별: <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.gender&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleValueChange&#125;</span> /&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"></span><br><span class="line">      직업: <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;job&quot;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.job&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleValueChange&#125;</span> /&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"></span><br><span class="line">      &lt;button type=<span class="string">&quot;submit&quot;</span>&gt;추가하기&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">      &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">      )</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> CustomerAdd</span><br></pre></td></tr></table></figure>





<p>그 다음 <code>App.js</code> 를 작업해 주자. CustomerAdd 컴포넌트를 화면에 출력하기 위해서 CustomerAdd를 import 해주고</p>
<figure class="highlight javascript"><figcaption><span>CustomerAdd.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> CustomerAdd <span class="keyword">from</span> <span class="string">&#x27;./components/CustomerAdd&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>  



<p>render 부분을 다음과 같이 바꿔주자</p>
<figure class="highlight javascript"><figcaption><span>CustomerAdd.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;Paper className = &#123;classes.root&#125;&gt;</span><br><span class="line">      &lt;Table className = &#123;classes.table&#125;&gt;</span><br><span class="line">        &lt;TableHead&gt;</span><br><span class="line">          &lt;TableRow&gt;</span><br><span class="line">            &lt;TableCell&gt; 번호 &lt;/TableCell&gt;</span><br><span class="line">            &lt;TableCell&gt; 이미지 &lt;/TableCell&gt;</span><br><span class="line">            &lt;TableCell&gt; 이름 &lt;/TableCell&gt;</span><br><span class="line">            &lt;TableCell&gt; 생년월일 &lt;/TableCell&gt;</span><br><span class="line">            &lt;TableCell&gt; 성별 &lt;/TableCell&gt;</span><br><span class="line">            &lt;TableCell&gt; 직업 &lt;/TableCell&gt;</span><br><span class="line">          &lt;/TableRow&gt;</span><br><span class="line">        &lt;/TableHead&gt;</span><br><span class="line">        &lt;TableBody&gt;</span><br><span class="line">        &#123;<span class="built_in">this</span>.state.customers ? <span class="built_in">this</span>.state.customers.map(<span class="function"><span class="params">c</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Customer</span> <span class="attr">key</span>=<span class="string">&#123;c.id&#125;</span> <span class="attr">id</span>=<span class="string">&#123;c.id&#125;</span> <span class="attr">image</span>=<span class="string">&#123;c.image&#125;</span> <span class="attr">name</span>=<span class="string">&#123;c.name&#125;</span> <span class="attr">birthday</span>=<span class="string">&#123;c.birthday&#125;</span> <span class="attr">gender</span>=<span class="string">&#123;c.gender&#125;</span> <span class="attr">job</span>=<span class="string">&#123;c.job&#125;</span> /&gt;</span></span></span><br><span class="line">          &#125;) : <span class="string">&#x27;&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">        &lt;/TableBody&gt;</span><br><span class="line">    &lt;/Table&gt;</span><br><span class="line">  &lt;/Paper&gt;</span><br><span class="line">  &lt;CustomerAdd/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br></pre></td></tr></table></figure>  

<p>그러면 다음과 같은 입력창이 생기는데 추가하기를 눌러주면 서버로 전송되는 것을 확인 할 수 있다.  </p>
<p><strong>결과 화면</strong></p>
<p><img src="/img/11%EA%B2%B0%EA%B3%BC.png">    </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cheal3.github.io/2020/09/04/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/%EA%B3%A0%EA%B0%9D%EA%B4%80%EB%A6%AC%EC%98%88%EC%A0%9C%20%EA%B3%B5%EB%B6%80/project-11/" data-id="ckf3dt5o90003w0v4bfoa8khp" class="article-share-link">공유</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-쓰레기통/고객관리예제 공부/project-10" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/04/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/%EA%B3%A0%EA%B0%9D%EA%B4%80%EB%A6%AC%EC%98%88%EC%A0%9C%20%EA%B3%B5%EB%B6%80/project-10/" class="article-date">
  <time datetime="2020-09-04T01:56:22.000Z" itemprop="datePublished">2020-09-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/">쓰레기통</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/04/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/%EA%B3%A0%EA%B0%9D%EA%B4%80%EB%A6%AC%EC%98%88%EC%A0%9C%20%EA%B3%B5%EB%B6%80/project-10/">React와 Node.js로 만드는 고객 관리 시스템 개발-10</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="AWS-RDS-서비스를-이용한-DB-연동"><a href="#AWS-RDS-서비스를-이용한-DB-연동" class="headerlink" title="AWS RDS 서비스를 이용한  DB 연동"></a>AWS RDS 서비스를 이용한  DB 연동</h1><p>AWS RDS로 데이터 베이스 만들어 보자</p>
<p><img src="/img/10RDS.png">    </p>
<p><img src="/img/10RDS2.png">  </p>
<p><img src="/img/10RDS3.png">  </p>
<h2>MySQL Workbench</h2>

<p>위에까지 하다가 오류가 발생해서 AWS 설정을 바꿨는데 이게 굉장히 오래 걸려서 중간에 잘려먹었다.  퍼블릭 액세스를 아니오 라고 설정했던 것이 원인이었는데 예로 변경하였더니 정상 작동하였다.</p>
<p>Workbench와 연동하는 방법은 엔드포인트 주소를 호스트에 입력하고 데이터베이스를 생성할 때 설정했던 ID 와 비밀번호를 쳐서 연동하면 된다.</p>
<p>연동이 되면 새로운 스키마를 작성하고 다음과 같이 고객 테이블을 구축하자.</p>
<figure class="highlight sql"><figcaption><span>reactexample</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">USE</span> reactexample;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> CUSTOMER (</span><br><span class="line"></span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line"></span><br><span class="line">	image <span class="built_in">VARCHAR</span>(<span class="number">1024</span>),</span><br><span class="line"></span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">VARCHAR</span>(<span class="number">64</span>),</span><br><span class="line"></span><br><span class="line">	birthday <span class="built_in">VARCHAR</span>(<span class="number">64</span>),</span><br><span class="line"></span><br><span class="line">	gender <span class="built_in">VARCHAR</span>(<span class="number">64</span>),</span><br><span class="line"></span><br><span class="line">	job <span class="built_in">VARCHAR</span>(<span class="number">64</span>)</span><br><span class="line"></span><br><span class="line">) <span class="keyword">DEFAULT</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> CUSTOMER <span class="keyword">VALUES</span> (</span><br><span class="line">	<span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;https://placeimg.com/64/64/any&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;염소&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;031223&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;여자&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;대학생&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> CUSTOMER <span class="keyword">VALUES</span> (</span><br><span class="line">	<span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;https://placeimg.com/64/64/2&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;최동욱&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;951211&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;남자&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;인턴&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> CUSTOMER <span class="keyword">VALUES</span> (</span><br><span class="line">	<span class="number">3</span>,</span><br><span class="line">    <span class="string">&#x27;https://placeimg.com/64/64/3CUSTOMER&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;털보&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;961127&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;남자&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;개&#x27;</span>);</span><br></pre></td></tr></table></figure>





<p><strong>결과 화면</strong></p>
<p><img src="/img/10%EA%B2%B0%EA%B3%BC.png">  </p>
<h2>gitignore</h2>

<p>데이터베이스 관련 정보가 깃허브에 올라가지 않도록 서버 쪽 <code>.gitignore</code> 파일을 수정하자</p>
<figure class="highlight plain"><figcaption><span>.gitignore</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># database</span><br><span class="line">&#x2F;database.json</span><br></pre></td></tr></table></figure>

<p>​    </p>
<p>이후에 database.json 에서 데이터베이스 정보를 설정하면 된다</p>
<figure class="highlight json"><figcaption><span>database.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;host&quot;</span>: 데이터베이스 주소,</span><br><span class="line"></span><br><span class="line">    <span class="attr">&quot;user&quot;</span>: 데이터베이스 사용자,</span><br><span class="line"></span><br><span class="line">    <span class="attr">&quot;password&quot;</span>: 데이터베이스 비밀번호,</span><br><span class="line"></span><br><span class="line">    <span class="attr">&quot;port&quot;</span>: <span class="string">&quot;3306&quot;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">&quot;database&quot;</span>: 데이터베이스 이름</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2>Node.js와 MySQL 연동하기</h2>

<p>먼저 NPM을 통해서 MySQL 라이브러리를 설치하자.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -S mysql</span><br></pre></td></tr></table></figure>



<p>설치된 MySQL 라이브러리를 활용해서 연동이 가능하다.</p>
<figure class="highlight javascript"><figcaption><span>server.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="keyword">const</span> port = process.env.PORT || <span class="number">5000</span>;</span><br><span class="line">app.use(bodyParser.json());</span><br><span class="line">app.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>: <span class="literal">true</span>&#125;));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> data = fs.readFileSync(<span class="string">&#x27;./database.json&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> conf = <span class="built_in">JSON</span>.parse(data);</span><br><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> connection = mysql.createConnection(&#123;</span><br><span class="line">  host : conf.host,</span><br><span class="line">  user : conf.user,</span><br><span class="line">  password: conf.password,</span><br><span class="line">  port : conf.port,</span><br><span class="line">  database: conf.database</span><br><span class="line">&#125;);</span><br><span class="line">connection.connect();</span><br><span class="line">app.get(<span class="string">&#x27;/api/customers/&#x27;</span>, <span class="function">(<span class="params">req,res</span>) =&gt;</span>&#123;</span><br><span class="line">  connection.query(</span><br><span class="line">    <span class="string">&#x27;SELECT * FROM CUSTOMER&#x27;</span>,</span><br><span class="line">    (err , rows, fields) =&gt; &#123;</span><br><span class="line">      res.send(rows);</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(port, <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`Listening on port <span class="subst">$&#123;port&#125;</span>`</span>));</span><br></pre></td></tr></table></figure>


<blockquote>
<p>CORS 라는 것도 있는데 도메인 또는 포트가 다른 서버의 자원을 요청하는 매커니즘이다. 서버를 8000번 포트 , REACT를 3000번 포트에서 실행하면 발생하거나 , 이미지를 저장하는 서버와 접속하는 서버가 다른 경우이다.</p>
</blockquote>
<p><strong>결과 화면</strong></p>
<p><img src="/img/10%EA%B2%B0%EA%B3%BC2.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cheal3.github.io/2020/09/04/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/%EA%B3%A0%EA%B0%9D%EA%B4%80%EB%A6%AC%EC%98%88%EC%A0%9C%20%EA%B3%B5%EB%B6%80/project-10/" data-id="ckf3dt5nw0001w0v43swrdyof" class="article-share-link">공유</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">다음 &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">카테고리</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/">쓰레기통</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%EC%9D%B8%ED%84%B4/">인턴</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%EC%9D%B8%ED%84%B4/React-js/">React.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%EC%9D%B8%ED%84%B4/%EA%B3%B5%EB%B6%80/">공부</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%EC%9D%B8%ED%84%B4/%EA%B3%B5%EB%B6%80/React/">React</a></li></ul></li></ul></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">아카이브</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">9월 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">8월 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">최근 포스트</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/09/15/%EA%B3%B5%EB%B6%80/%EC%9E%A1%EA%B3%B5%EB%B6%80/%ED%91%B8%EC%8B%9C%EC%95%8C%EB%A6%BC/">기획) 기능정의</a>
          </li>
        
          <li>
            <a href="/2020/09/14/doit%EB%A6%AC%EC%95%A1%ED%8A%B8/1%EC%9D%BC%EC%B0%A8/">Do it! 리액트 프로그래밍 1일차</a>
          </li>
        
          <li>
            <a href="/2020/09/09/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/%EC%9B%B9/%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80/">브라우저는 어떻게 작동하는가??</a>
          </li>
        
          <li>
            <a href="/2020/09/08/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/react%20express%20%EC%97%B0%EB%8F%99/react%20express%20%EC%97%B0%EB%8F%993/">React x Express 연동하여 데이터 전송하기(3)</a>
          </li>
        
          <li>
            <a href="/2020/09/08/%EC%93%B0%EB%A0%88%EA%B8%B0%ED%86%B5/react%20express%20%EC%97%B0%EB%8F%99/react%20express%20%EC%97%B0%EB%8F%992/">React x Express 연동하여 데이터 전송하기(2)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 cheal3@naver.com<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>