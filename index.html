<!doctype html>
<html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Choi Dong Wook blog</title><meta description=""><meta property="og:type" content="blog"><meta property="og:title" content="Choi Dong Wook blog"><meta property="og:url" content="http://cheal3.github.io/"><meta property="og:site_name" content="Choi Dong Wook blog"><meta property="og:locale" content="ko_KR"><meta property="og:image" content="http://cheal3.github.io/img/og_image.png"><meta property="article:author" content="cheal3@naver.com"><meta property="article:tag" content="IT"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://cheal3.github.io"},"headline":"Choi Dong Wook blog","image":["http://cheal3.github.io/img/og_image.png"],"author":{"@type":"Person","name":"cheal3@naver.com"},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/monokai-sublime.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><meta name="generator" content="Hexo 5.1.1"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="Choi Dong Wook blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item is-active" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-09-10T06:16:32.974Z" title="2020-09-10T06:16:32.974Z">2020-09-10</time>게시 됨</span><span class="level-item"><time dateTime="2020-09-10T06:17:02.965Z" title="2020-09-10T06:17:02.965Z">2020-09-10</time>업데이트 됨</span><span class="level-item">몇 초안에 읽기 (약 7 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/09/10/%EC%82%AC%EC%A7%84/%ED%85%8C%EC%8A%A4%ED%8A%B8/"> </a></h1><div class="content"><p><img src="/img/%ED%99%94%EC%A7%88%ED%85%8C%EC%8A%A4%ED%8A%B8.png"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-09-08T07:17:44.000Z" title="2020-09-08T07:17:44.000Z">2020-09-08</time>게시 됨</span><span class="level-item"><time dateTime="2020-09-08T07:19:35.803Z" title="2020-09-08T07:19:35.803Z">2020-09-08</time>업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/">인턴</a><span> / </span><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/React-js/">React.js</a></span><span class="level-item">4분안에 읽기 (약 580 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/09/08/react%20express%20%EC%97%B0%EB%8F%99/react%20express%20%EC%97%B0%EB%8F%993/">React x Express 연동하여 데이터 전송하기(3)</a></h1><div class="content"><h1 id="React-x-Express-에-Mysql-연동하기"><a href="#React-x-Express-에-Mysql-연동하기" class="headerlink" title="React x Express 에 Mysql 연동하기"></a>React x Express 에 Mysql 연동하기</h1><p>이번엔 Mysql  쿼리문을 통해 데이터를 받아오는 방법을 알아보자.</p>
<p>먼저 AWS에 만들어 두었던 데이터베이스를 그대로 쓰기로 하였다.</p>
<p>REACT라는 이름의 테이블을 만들어주고 데이터를 3개 넣어주자</p>
<figure class="highlight sql"><figcaption><span>reactexample</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> REACT (</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line">	image <span class="built_in">VARCHAR</span>(<span class="number">1024</span>),</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">VARCHAR</span>(<span class="number">64</span>),</span><br><span class="line">	birthday <span class="built_in">VARCHAR</span>(<span class="number">64</span>),</span><br><span class="line">	gender <span class="built_in">VARCHAR</span>(<span class="number">64</span>),</span><br><span class="line">	job <span class="built_in">VARCHAR</span>(<span class="number">64</span>)</span><br><span class="line"></span><br><span class="line">)<span class="keyword">DEFAULT</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> REACT <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;https://placeimg.com/64/64/1&#x27;</span>, <span class="string">&#x27;최동욱&#x27;</span>, <span class="string">&#x27;921231&#x27;</span>, <span class="string">&#x27;남자&#x27;</span>, <span class="string">&#x27;대학생&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> REACT <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;https://placeimg.com/64/64/2&#x27;</span>, <span class="string">&#x27;동욱최&#x27;</span>, <span class="string">&#x27;951211&#x27;</span>, <span class="string">&#x27;남자&#x27;</span>, <span class="string">&#x27;프로그래머&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> REACT <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">&#x27;https://placeimg.com/64/64/3&#x27;</span>, <span class="string">&#x27;욱동최&#x27;</span>, <span class="string">&#x27;911215&#x27;</span>, <span class="string">&#x27;남자&#x27;</span>, <span class="string">&#x27;기획자&#x27;</span>);</span><br></pre></td></tr></table></figure>    

<p>MySQL Workbench에서 확인해 보면 잘 생성된 것을 확인할 수 있다.</p>
<p><img src="/img/db%EC%97%B0%EB%8F%991.png">    </p>
<p>이후에 database.json에서 데이터베이스 정보를 설정해 주자.</p>
<figure class="highlight json"><figcaption><span>database.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">&quot;host&quot;</span>: <span class="string">&quot;데이터베이스 주소&quot;</span>,  <span class="comment">// AWS 엔드포인트</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">&quot;user&quot;</span>: <span class="string">&quot;데이터베이스 사용자&quot;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;데이터베이스 비밀번호&quot;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">&quot;port&quot;</span>: <span class="string">&quot;3306&quot;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">&quot;database&quot;</span>: <span class="string">&quot;데이터베이스 이름&quot;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  


<br/>

<p>npm을 이용하여 MySQL 라이브러리를 설치해주자.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -S mysql</span><br></pre></td></tr></table></figure>



<p> <code>index.js</code> 에 데이터베이스를 연결하는 코드를 작성하자  </p>
<figure class="highlight javascript"><figcaption><span>index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> router = express.Router();</span><br><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> data = fs.readFileSync(<span class="string">&#x27;./database.json&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> conf = <span class="built_in">JSON</span>.parse(data);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> connection = mysql.createConnection(&#123;</span><br><span class="line">  host: conf.host,</span><br><span class="line">  user: conf.user,</span><br><span class="line">  password: conf.password,</span><br><span class="line">  port: conf.port,</span><br><span class="line">  database: conf.database</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req,res</span>) =&gt;</span> res.json (&#123;<span class="attr">username</span>: <span class="string">&#x27;테스트&#x27;</span>&#125;))</span><br><span class="line">router.get(<span class="string">&#x27;/test&#x27;</span>, <span class="function">(<span class="params">req,res</span>) =&gt;</span> res.json (&#123;<span class="attr">username</span>: <span class="string">&#x27;test&#x27;</span>&#125;))</span><br><span class="line">router.get(<span class="string">&#x27;/react&#x27;</span>,<span class="function">(<span class="params">req,res</span>) =&gt;</span>&#123;</span><br><span class="line">  connection.connect();</span><br><span class="line">  connection.query(</span><br><span class="line">​    <span class="string">&#x27;SELECT * FROM REACT&#x27;</span>,</span><br><span class="line">​    (err , rows, fields) =&gt;&#123;</span><br><span class="line">​      res.json(rows) &#125;</span><br><span class="line">​      )&#125;);</span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure>  









<p><code>App.js</code>에 가서 테스트를 위해 기존의 코드들을 변경하자.</p>
<figure class="highlight javascript"><figcaption><span>App.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> logo <span class="keyword">from</span> <span class="string">&#x27;./logo.svg&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state=&#123;</span><br><span class="line">      id:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      image:<span class="literal">null</span>,</span><br><span class="line">      name:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      birthday:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      job:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount()&#123;</span><br><span class="line">    fetch(<span class="string">&#x27;api/react&#x27;</span>)</span><br><span class="line">    .then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span><br><span class="line"></span><br><span class="line">    .then(<span class="function"><span class="params">data</span> =&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">     <span class="built_in">console</span>.log(data[<span class="number">0</span>].id) <span class="comment">//개발자도구에서 확인 가능</span></span><br><span class="line">     <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      id:data[<span class="number">0</span>].id,</span><br><span class="line">      image:data[<span class="number">0</span>].image,</span><br><span class="line">      name:data[<span class="number">0</span>].name,</span><br><span class="line">      birthday:data[<span class="number">0</span>].birthday,</span><br><span class="line">      job:data[<span class="number">0</span>].job,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    )</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.state);&#125;)&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  render()&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">      &lt;header className=<span class="string">&quot;App-header&quot;</span>&gt;</span><br><span class="line">        &lt;img src=&#123;logo&#125; className=<span class="string">&quot;App-logo&quot;</span> alt=<span class="string">&quot;logo&quot;</span> /&gt;</span><br><span class="line">        &#123; <span class="string">`Hello <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(<span class="built_in">this</span>.state)&#125;</span>`</span> &#125;</span><br><span class="line">      &lt;/header&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>  



<blockquote>
<p><code>JSON.stringify</code> 는 object 파일을 있는 그대로 출력할 때 사용한다.</p>
</blockquote>
<p><img src="/img/db%EC%97%B0%EB%8F%992.png">    </p>
<p>데이터를 하드코딩으로 한 줄만 불러왔는데 <code>componentDidMount</code> 에서 Map을 사용한다면 여러개를 받아올 수 있을 것이다.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-09-08T05:11:55.000Z" title="2020-09-08T05:11:55.000Z">2020-09-08</time>게시 됨</span><span class="level-item"><time dateTime="2020-09-08T05:15:15.192Z" title="2020-09-08T05:15:15.192Z">2020-09-08</time>업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/">인턴</a><span> / </span><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/React-js/">React.js</a></span><span class="level-item">5분안에 읽기 (약 720 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/09/08/react%20express%20%EC%97%B0%EB%8F%99/react%20express%20%EC%97%B0%EB%8F%992/">React x Express 연동하여 데이터 전송하기(2)</a></h1><div class="content"><h1 id="React-x-Express-연동하기"><a href="#React-x-Express-연동하기" class="headerlink" title="React x Express 연동하기"></a>React x Express 연동하기</h1><p>이번엔 클라이언트와 서버를 한번에 시작하는 방법을 알아보자</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install npm-run-all --save</span><br></pre></td></tr></table></figure>



<blockquote>
<p><code>cannot read property &#39;match&#39; of undefined  </code> 에러가 나와서 <code>package-lock.json</code> 파일을 지워주고 다시 실행하였더니 정상 작동하였다.</p>
</blockquote>
<p>그런다음 root 디렉터리에서 <code>package.json</code> 파일을 열어서 <code>scripts</code> 부분을 수정하자  </p>
<figure class="highlight json"><figcaption><span>package.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line"></span><br><span class="line">  &quot;start&quot;: &quot;npm-run-all --parallel start:**&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;start:client&quot; : &quot;react-scripts start&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;start:server&quot; : &quot;node ./servers/server.js&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;build&quot;: &quot;react-scripts build&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;test&quot;: &quot;react-scripts test&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;eject&quot;: &quot;react-scripts eject&quot;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>  







<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm start</span><br></pre></td></tr></table></figure>

<p>이제 클라이언트를 실행하면  서버까지 같이 실행되는 것을 확인할 수 있다 .</p>
<p><img src="/img/react%EC%97%B0%EB%8F%995.png">    </p>
<h2>Proxy 사용</h2>

<p>서버 url 호출 부분을 조금 보기좋게 변경해보자</p>
<figure class="highlight javascript"><figcaption><span>App.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">componentDidMount()&#123;</span><br><span class="line"></span><br><span class="line">  fetch(<span class="string">&#x27;api&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span><br><span class="line"></span><br><span class="line">  .then(<span class="function"><span class="params">data</span> =&gt;</span> <span class="built_in">this</span>.setState(&#123;<span class="attr">username</span>:data.username&#125;));</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>  





<p>다음으로 proxy 설정을 해주자</p>
<blockquote>
<p>프록시 :다른 서버 상의 자원을 찾는 클라이언트로부터 요청을 받아 중계하는 서버</p>
<p> 출처: 네이버 지식백과</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install http-proxy-middleware --save</span><br></pre></td></tr></table></figure>

<p>그리고 src 디렉터리 아래에 <code>setupProxy.js</code> 를 생성하고 다음과 같이 작성하자</p>
<figure class="highlight javascript"><figcaption><span>setupProxy.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> proxy = <span class="built_in">require</span>(<span class="string">&#x27;http-proxy-middleware&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function">(<span class="params">app</span>) =&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">  app.use(</span><br><span class="line"></span><br><span class="line">​    proxy.createProxyMiddleware(<span class="string">&#x27;/api&#x27;</span>, &#123;</span><br><span class="line"></span><br><span class="line">​      target: <span class="string">&#x27;http://localhost:5000/&#x27;</span>,</span><br><span class="line"></span><br><span class="line">​      changeOrigin: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">​    &#125;)</span><br><span class="line"></span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>  





<p>테스트하기 위해서 server.js에서 cors와 관련된 부분을 주석처리 해주자.</p>
<figure class="highlight javascript"><figcaption><span>server.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">. . .</span><br><span class="line"></span><br><span class="line"><span class="comment">//const cors = require(&#x27;cors&#x27;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//app.use(cors());</span></span><br><span class="line"></span><br><span class="line">. . .</span><br><span class="line"></span><br></pre></td></tr></table></figure>  



<p>  마찬가지로 잘 나오는 것을 확인할 수 있다.</p>
<p><img src="/img/react%EC%97%B0%EB%8F%996.png">    </p>
<p>실제 프로젝트에서는 서버쪽에서 api 를 하나만 제공하지 않을 것이다.</p>
<p>더 많은 api를 만들기 위해 <code>server.js</code> 에 route를 적용하자.  servers 폴더 아래 routes 디렉터리를 만들고 <code>index.js</code>를 만들자</p>
<figure class="highlight javascript"><figcaption><span>server.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = express.Router();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req,res</span>) =&gt;</span> res.json (&#123;<span class="attr">username</span>: <span class="string">&#x27;route&#x27;</span>&#125;))</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/test&#x27;</span>, <span class="function">(<span class="params">req,res</span>) =&gt;</span> res.json (&#123;<span class="attr">username</span>: <span class="string">&#x27;test&#x27;</span>&#125;))</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br><span class="line"></span><br></pre></td></tr></table></figure>  





<p>그리고 server.js를 수정해보자.</p>
<figure class="highlight javascript"><figcaption><span>server.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> port = process.env.PORT || <span class="number">5000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> route = <span class="built_in">require</span>(<span class="string">&#x27;./routes/index&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//const cors = require(&#x27;cors&#x27;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//app.use(cors());</span></span><br><span class="line"></span><br><span class="line">app.use(bodyParser.json());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.use(<span class="string">&#x27;/api&#x27;</span>, route); <span class="comment">// app.use(&#x27;/api&#x27; , (req,res) =&gt; res.json (&#123;username: &#x27;테스트&#x27;&#125;));</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.listen(port , <span class="function">() =&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`express is running on <span class="subst">$&#123;port&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>  

<p><code>app.use(&#39;/api&#39; , route);</code> 를 통해    <code>/api</code> 로 오는 요청은 전부 route에서 처리하게 하였다.</p>
<p>만약 <code>App.js</code>  를 다음과 같이 수정한다고 해보면</p>
<figure class="highlight javascript"><figcaption><span>App.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">componentDidMount()&#123;</span><br><span class="line"></span><br><span class="line"> fetch(<span class="string">&#x27;api/test&#x27;</span>)</span><br><span class="line"></span><br><span class="line"> .then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span><br><span class="line"></span><br><span class="line"> .then(<span class="function"><span class="params">data</span> =&gt;</span> <span class="built_in">this</span>.setState(&#123;<span class="attr">username</span>:data.username&#125;));</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>  





<p>클라이언트가   <code>localhost:5000/api/test</code> 에서 데이터를 받아오게 되는데  먼저 <code>server.js</code> 의 <strong>app.use(‘/api’ , route);</strong> 에 걸리고 <code>index.js</code> 의 <strong>router.get(‘/test’, (req,res) =&gt; res.json ({username: ‘test’}))</strong>  에 최종적으로 도착하여 test라는  username을 받아오게 된다.  </p>
<p><strong>결과 화면</strong></p>
<p><img src="/img/react%EC%97%B0%EB%8F%997.png">  </p>
<blockquote>
<p>출처 : <a target="_blank" rel="noopener" href="https://hello-bryan.tistory.com/122">https://hello-bryan.tistory.com/122</a></p>
</blockquote>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-09-08T02:09:25.000Z" title="2020-09-08T02:09:25.000Z">2020-09-08</time>게시 됨</span><span class="level-item"><time dateTime="2020-09-08T05:15:37.566Z" title="2020-09-08T05:15:37.566Z">2020-09-08</time>업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/">인턴</a><span> / </span><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/React-js/">React.js</a></span><span class="level-item">5분안에 읽기 (약 757 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/09/08/react%20express%20%EC%97%B0%EB%8F%99/react%20express%20%EC%97%B0%EB%8F%99/">React x Express 연동하여 데이터 전송하기</a></h1><div class="content"><h1 id="React-x-Express-연동하기"><a href="#React-x-Express-연동하기" class="headerlink" title="React x Express 연동하기"></a>React x Express 연동하기</h1><p>우선 CRA를 통해 리액트 프로젝트를 시작하자.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app react_express</span><br><span class="line">cd react_express</span><br><span class="line">npm start</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>npx</strong>는 반복되지만 자주 쓰이는 형태 (보일러플레이트) 에 효과적이다   </p>
<p> 최신버전에 해당하는 패키지를 설치하여 실행하고, 실행된 이후에 해당 패키지를 제거한다.  </p>
</blockquote>
<p>그럼 익숙한 창이 나온다.</p>
<p><img src="/img/react%EC%97%B0%EB%8F%99.png">    </p>
<p>  그런다음  src 아래에 있는 <code>App.js</code> 를 수정하자</p>
<figure class="highlight javascript"><figcaption><span>App.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> logo <span class="keyword">from</span> <span class="string">&#x27;./logo.svg&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state=&#123;</span><br><span class="line">      username:<span class="literal">null</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  render()&#123;</span><br><span class="line">      <span class="keyword">const</span> &#123;username&#125; = <span class="built_in">this</span>.state;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        &lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">          &lt;header className=<span class="string">&quot;App-header&quot;</span>&gt;</span><br><span class="line">            &lt;img src=&#123;logo&#125; className=<span class="string">&quot;App-logo&quot;</span> alt=<span class="string">&quot;logo&quot;</span> /&gt;</span><br><span class="line">            &#123;username ? <span class="string">`Hello <span class="subst">$&#123;username&#125;</span>`</span> : <span class="string">&#x27;Hello World&#x27;</span>&#125;</span><br><span class="line">          &lt;/header&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"> 		 );</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>      





<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username ? &#96;Hello $&#123;username&#125;&#96; : &#39;Hello World&#39;</span><br></pre></td></tr></table></figure>

<p>에서  username 이 <code>null</code> 이기 때문에  <code>Hello world</code> 가 출력 됨은 자명하다. 그럼 이 username 을 express로 만든 서버에서 받아오도록 하자  </p>
<p>서버쪽을 구현하기 위해 express를 설치해 주자</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm add express --save</span><br></pre></td></tr></table></figure>



<p>json형식으로 데이터를 주고받기 위해 <code>body-parser</code>도 설치해준다</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install body-parser</span><br></pre></td></tr></table></figure>



<p>root에서 servers라는 디렉터리를 만들고 <code>server.js</code>파일을 생성하고 다음과 같이 작성하자.</p>
<figure class="highlight javascript"><figcaption><span>server.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="keyword">const</span> bodyParser =  <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> port = process.env.PORT || <span class="number">5000</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.use(bodyParser.json());</span><br><span class="line">app.use(<span class="string">&#x27;/api&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>   &#123;</span><br><span class="line">    res.json(&#123;<span class="attr">username</span>:<span class="string">&#x27;dongwook&#x27;</span>&#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(port , <span class="function">() =&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`express is running on <span class="subst">$&#123;port&#125;</span>`</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>     



<p><code>localhost:5000/api</code>  에 접속해 주면 다음과 같은 결과가 나온다.</p>
<p><img src="/img/react%EC%97%B0%EB%8F%992.png">    </p>
<p>이제 client 쪽에서 이 데이터를 받아오게 하면 된다.</p>
<p><code>App.js</code>에서 <code>componentDidMount()</code>를 추가한다.</p>
<blockquote>
<p><strong>React의 라이프 사이클</strong></p>
<p>기본적으로 React 라이브러리가 처음 컴포넌트를 실행할 때는 다음순서를 따른다.</p>
<ol>
<li><p>constructor()</p>
</li>
<li><p>componentWillMount()</p>
</li>
<li><p>render()</p>
</li>
<li><p>componentDidMount()</p>
<p>그리고 props혹은 state가 변경될 때는 shouldComponentUpdate() 함수 등이 사용되어 실질적으로 render 함수를 불러와 뷰를 갱신하게 된다. 또한 컴포넌트가 삭제될 때는 componentWillUnmount 함수가 실행된다.</p>
<p>일반적으로 API를 불러와서 웹 사이트 화면에 특정한 뷰를 출력하고자 한다면 <code>componentDidMount()</code> 함수에서 API를 비동기적으로 호출하면 된다.</p>
</li>
</ol>
</blockquote>
<figure class="highlight javascript"><figcaption><span>App.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">componentDidMoint()&#123;</span><br><span class="line">	fetch(<span class="string">&#x27;http://localhost:5000/api&#x27;</span>)</span><br><span class="line">	.then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span><br><span class="line">	.then(<span class="function"><span class="params">data</span> =&gt;</span> <span class="built_in">this</span>.setState(&#123;<span class="attr">username</span>: data.username&#125;));</span><br><span class="line">&#125;</span><br><span class="line">render()&#123;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>     





<p>이제 클라이언트에서 접속을하고 개발자 도구의 console로 들어가 보면 다음과 같이 에러가 떠있다.</p>
<p><img src="/img/react%EC%97%B0%EB%8F%993.png"></p>
<p>CORS 정책에 의해서 다른 포트나 다른 도메인에서 온 요청을 허용하지 않는것인데 server.js에서 cors를 허용하는 방법으로 변경해 보자. 먼저 cors를 설치해주고</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install cors --save</span><br></pre></td></tr></table></figure>



<p>  server.js에 다음 두 줄을 추가해주자.</p>
<figure class="highlight javascript"><figcaption><span>server.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">&#x27;cors&#x27;</span>);</span><br><span class="line"></span><br><span class="line">app.use(cors());</span><br></pre></td></tr></table></figure>       





<p>그런 다음 서버를 재시작하면 제대로 데이터가 전달 된 것을 확인할 수 있다.</p>
<p><img src="/img/react%EC%97%B0%EB%8F%994.png"></p>
<blockquote>
<p>출처 : <a target="_blank" rel="noopener" href="https://hello-bryan.tistory.com/121?category=695724">https://hello-bryan.tistory.com/121?category=695724</a></p>
</blockquote>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-09-04T05:58:49.000Z" title="2020-09-04T05:58:49.000Z">2020-09-04</time>게시 됨</span><span class="level-item"><time dateTime="2020-09-04T05:58:21.298Z" title="2020-09-04T05:58:21.298Z">2020-09-04</time>업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/">인턴</a><span> / </span><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/React-Node-js/">React + Node.js</a></span><span class="level-item">4분안에 읽기 (약 634 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/09/04/%EA%B3%A0%EA%B0%9D%EA%B4%80%EB%A6%AC%EC%98%88%EC%A0%9C%20%EA%B3%B5%EB%B6%80/project-13/">React와 Node.js로 만드는 고객 관리 시스템 개발-13</a></h1><div class="content"><h1 id="부모-컴포넌트의-State변경을-통한-고객-정보-갱신"><a href="#부모-컴포넌트의-State변경을-통한-고객-정보-갱신" class="headerlink" title="부모 컴포넌트의 State변경을 통한 고객         정보 갱신"></a>부모 컴포넌트의 State변경을 통한 고객         정보 갱신</h1><p>지금까지는 정보가 추가되면 새로고침을 통해서 확인할 수 있었다. 하지만 리액트는 기본적으로 <strong>SPA(Single Page Application)</strong> 구조로 동작하므로 전체 페이지를 새로고침하는 것은 비효율적이다.</p>
<p>이럴때는 고객 추가(Customer Add) 컴포넌트에서 부모 컴포넌트의 State를 변경하는 식으로 필요한 부분만 새로고침 하도록 설정하면 된다. (Props를 전달)  </p>
<h2>전체 고객 목록 다시 불러오기 </h2>

<p>가장 대표적인 방법은 전체 고객 목록을 다시 불러옴으로써 State를 갱신하는 방식이다.</p>
<p><code>App.js</code> 를 다음과 같이 변경하자</p>
<figure class="highlight javascript"><figcaption><span>App.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;Component&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Customer <span class="keyword">from</span> <span class="string">&#x27;./components/Customer&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Paper <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/Paper&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Table <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/Table&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TableHead <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/TableHead&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TableBody <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/TableBody&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TableRow <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/TableRow&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TableCell <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/TableCell&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> CircularProgress <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/CircularProgress&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; withStyles &#125; <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/styles&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> CustomerAdd <span class="keyword">from</span> <span class="string">&#x27;./components/CustomerAdd&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styles = <span class="function"><span class="params">theme</span> =&gt;</span> (&#123;</span><br><span class="line">  root: &#123;</span><br><span class="line">    width: <span class="string">&quot;100%&quot;</span>,</span><br><span class="line">    marginTop: theme.spacing.unit * <span class="number">3</span>,</span><br><span class="line">    overflowX: <span class="string">&quot;auto&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    table: &#123;</span><br><span class="line">      minWidth: <span class="number">1080</span></span><br><span class="line">    &#125;,</span><br><span class="line">    progress:&#123;</span><br><span class="line">      margin: theme.spacing.unit *<span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state= &#123;</span><br><span class="line">      customers: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      completed: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.stateRefresh = <span class="built_in">this</span>.stateRefresh.bind(<span class="built_in">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  stateRefresh()&#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      customers:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      completed: <span class="number">0</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">this</span>.callApi()</span><br><span class="line">    .then(<span class="function"><span class="params">res</span> =&gt;</span> <span class="built_in">this</span>.setState(&#123;<span class="attr">customers</span>: res&#125;))</span><br><span class="line">    .catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.log(err));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount()&#123;</span><br><span class="line">    <span class="built_in">this</span>.timer = <span class="built_in">setInterval</span>(<span class="built_in">this</span>.progress,<span class="number">20</span>);</span><br><span class="line">    <span class="built_in">this</span>.callApi()</span><br><span class="line">      .then(<span class="function"><span class="params">res</span> =&gt;</span> <span class="built_in">this</span>.setState(&#123;<span class="attr">customers</span>:res&#125;))</span><br><span class="line">      .catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.log(err));</span><br><span class="line">  &#125;</span><br><span class="line">  componentWillUnmount()&#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timer);</span><br><span class="line">  &#125;</span><br><span class="line">  callApi = <span class="keyword">async</span>() =&gt;&#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(<span class="string">&#x27;/api/customers&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> body = <span class="keyword">await</span> response.json();</span><br><span class="line">    <span class="keyword">return</span> body;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  progress = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;completed &#125; = <span class="built_in">this</span>.state;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123; <span class="attr">completed</span>:completed &gt;=<span class="number">100</span>?<span class="number">0</span> : completed +<span class="number">1</span>&#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  render()&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> &#123; classes &#125; = <span class="built_in">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">      &lt;Paper className = &#123;classes.root&#125;&gt;</span><br><span class="line">        &lt;Table className = &#123;classes.table&#125;&gt;</span><br><span class="line">          &lt;TableHead&gt;</span><br><span class="line">            &lt;TableRow&gt;</span><br><span class="line">              &lt;TableCell&gt; 번호 &lt;/TableCell&gt;</span><br><span class="line">              &lt;TableCell&gt; 이미지 &lt;/TableCell&gt;</span><br><span class="line">              &lt;TableCell&gt; 이름 &lt;/TableCell&gt;</span><br><span class="line">              &lt;TableCell&gt; 생년월일 &lt;/TableCell&gt;</span><br><span class="line">              &lt;TableCell&gt; 성별 &lt;/TableCell&gt;</span><br><span class="line">              &lt;TableCell&gt; 직업 &lt;/TableCell&gt;</span><br><span class="line">            &lt;/TableRow&gt;</span><br><span class="line">          &lt;/TableHead&gt;</span><br><span class="line">          &lt;TableBody&gt;</span><br><span class="line">          &#123;<span class="built_in">this</span>.state.customers ?</span><br><span class="line">            <span class="built_in">this</span>.state.customers.map(<span class="function"><span class="params">c</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Customer</span> <span class="attr">key</span>=<span class="string">&#123;c.id&#125;</span> <span class="attr">id</span>=<span class="string">&#123;c.id&#125;</span> <span class="attr">image</span>=<span class="string">&#123;c.image&#125;</span> <span class="attr">name</span>=<span class="string">&#123;c.name&#125;</span> <span class="attr">birthday</span>=<span class="string">&#123;c.birthday&#125;</span> <span class="attr">gender</span>=<span class="string">&#123;c.gender&#125;</span> <span class="attr">job</span>=<span class="string">&#123;c.job&#125;</span> /&gt;</span></span></span><br><span class="line">            &#125;) :</span><br><span class="line">            &lt;TableRow&gt;</span><br><span class="line">              &lt;TableCell colSpan=<span class="string">&quot;6&quot;</span> align=<span class="string">&quot;center&quot;</span>&gt;</span><br><span class="line">              &lt;CircularProgress className=&#123;classes.progress&#125; variant=<span class="string">&quot;determinate&quot;</span> value=&#123;<span class="built_in">this</span>.state.completed&#125; /&gt;</span><br><span class="line">              &lt;/TableCell&gt;</span><br><span class="line">          &lt;/TableRow&gt;</span><br><span class="line">        &#125;</span><br><span class="line">          &lt;/TableBody&gt;</span><br><span class="line">      &lt;/Table&gt;</span><br><span class="line">    &lt;/Paper&gt;</span><br><span class="line">    &lt;CustomerAdd stateRefresh=&#123;<span class="built_in">this</span>.stateRefresh&#125;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> withStyles(styles)(App);</span><br></pre></td></tr></table></figure>    



<p>CustomerAdd 컴포넌트로 stateRefresh()함수를 보내면 CustomerAdd 컴포넌트가 부모 컴포넌트인 App 컴포넌트의 State를 갱신하게 된다.  </p>
<p>CustomerAdd.js에 가서 <code>window.location.reload()</code> 함수를 제거하고 다음의 구문을 넣자.</p>
<figure class="highlight javascript"><figcaption><span>CustomerAdd.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.props.stateRefresh();</span><br></pre></td></tr></table></figure>  





<p>다만 고객 목록 데이터를 불러오는 과정은 비동기적으로 수행된다는 점에서 항상 고객 데이터를 추가한 이후에 고객 목록 데이터를 불러온다는 것을 보장하지 못한다. 따라서 다음과 같이 고객 추가 이후에 서버로부터 응답을 받고 나서 고객 목록을 다시 불러오도록 설정해야한다</p>
<figure class="highlight javascript"><figcaption><span>CustomerAdd.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">handleFormSubmit(e)&#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">    <span class="built_in">this</span>.addCustomer()</span><br><span class="line">    .then(<span class="function">(<span class="params">response</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(response.data);</span><br><span class="line">      <span class="built_in">this</span>.props.stateRefresh();</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      file: <span class="literal">null</span>,</span><br><span class="line">      userName: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      birthday: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      gender: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      job: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      fileName: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>  
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-09-04T05:15:21.000Z" title="2020-09-04T05:15:21.000Z">2020-09-04</time>게시 됨</span><span class="level-item"><time dateTime="2020-09-04T05:19:45.464Z" title="2020-09-04T05:19:45.464Z">2020-09-04</time>업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/">인턴</a><span> / </span><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/React-Node-js/">React + Node.js</a></span><span class="level-item">3분안에 읽기 (약 505 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/09/04/%EA%B3%A0%EA%B0%9D%EA%B4%80%EB%A6%AC%EC%98%88%EC%A0%9C%20%EA%B3%B5%EB%B6%80/project-12/">React와 Node.js로 만드는 고객 관리 시스템 개발-12</a></h1><div class="content"><h1 id="Express-에서-파일-업로드-요청-처리-및-DB-데이터-삽입"><a href="#Express-에서-파일-업로드-요청-처리-및-DB-데이터-삽입" class="headerlink" title="Express 에서 파일 업로드 요청 처리 및 DB 데이터 삽입"></a>Express 에서 파일 업로드 요청 처리 및 DB 데이터 삽입</h1><p>사용자가 보낸 고객 데이터를 Node.js Express로 처리하여 서버의 특정한 폴더에 업로드 하는 방법에 대해서 알아보자. 이후에 MySQL DB에 삽입하고 , 클라이언트에서 접근할 수 있도록 처리해보자.</p>
<p>먼저 CustomerAdd.js의 <code>handleFormSubmit()</code> 을 수정해주자. 데이터를 전송한 이후에 고객 추가 양식을 비운 뒤 페이지를 새로고침하여 고객 데이터를 확인하는 것이다. 실제 배포 버전에서는 이런쪽으로 코딩하면 안되지만 빠른 테스트를 위해서 해보자.</p>
<figure class="highlight javascript"><figcaption><span>CustomerAdd.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">handleFormSubmit(e)&#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">    <span class="built_in">this</span>.addCustomer()</span><br><span class="line">    .then(<span class="function">(<span class="params">response</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(response.data);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      file: <span class="literal">null</span>,</span><br><span class="line">      userName: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      birthday: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      gender: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      job: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      fileName: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">window</span>.location.reload();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>





<p>이제 node.js에서 이러한 파일 업로드 요청을 처리하면 된다. 이 때 <strong>multer</strong> 라이브러리를 사용하므로</p>
<p>루트 디렉터리에서 다음과 같이 명령어 입력하자 그리고 upload 폴더를 생성하자</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --save multer</span><br><span class="line">mkdir upload</span><br></pre></td></tr></table></figure>



<p>그 다음 <code>server.js</code> 도 수정해 주자.</p>
<figure class="highlight javascript"><figcaption><span>server.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="keyword">const</span> port = process.env.PORT || <span class="number">5000</span>;</span><br><span class="line">app.use(bodyParser.json());</span><br><span class="line">app.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>: <span class="literal">true</span>&#125;));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> data = fs.readFileSync(<span class="string">&#x27;./database.json&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> conf = <span class="built_in">JSON</span>.parse(data);</span><br><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> multer = <span class="built_in">require</span>(<span class="string">&#x27;multer&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> upload = multer(&#123;<span class="attr">dest</span>:<span class="string">&#x27;./upload&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> connection = mysql.createConnection(&#123;</span><br><span class="line">  host : conf.host,</span><br><span class="line">  user : conf.user,</span><br><span class="line">  password: conf.password,</span><br><span class="line">  port : conf.port,</span><br><span class="line">  database: conf.database</span><br><span class="line">&#125;);</span><br><span class="line">connection.connect();</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/api/customers&#x27;</span>, <span class="function">(<span class="params">req,res</span>) =&gt;</span>&#123;</span><br><span class="line">  connection.query(</span><br><span class="line">    <span class="string">&#x27;SELECT * FROM CUSTOMER&#x27;</span>,</span><br><span class="line">    (err , rows, fields) =&gt; &#123;</span><br><span class="line">      res.send(rows);</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.use(<span class="string">&#x27;/image&#x27;</span>,express.static(<span class="string">&#x27;./upload&#x27;</span>));</span><br><span class="line"></span><br><span class="line">app.post(<span class="string">&#x27;/api/customers&#x27;</span>, upload.single(<span class="string">&#x27;image&#x27;</span>),<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> sql = <span class="string">&quot;INSERT INTO CUSTOMER VALUES (null,?,?,?,?,?)&quot;</span>;</span><br><span class="line">  <span class="keyword">let</span> image= <span class="string">&#x27;/image/&#x27;</span> + req.file.filename;</span><br><span class="line">  <span class="keyword">let</span> name = req.body.name;</span><br><span class="line">  <span class="keyword">let</span> birthday = req.body.birthday;</span><br><span class="line">  <span class="keyword">let</span> gender = req.body.gender;</span><br><span class="line">  <span class="keyword">let</span> job = req.body.job;</span><br><span class="line">  <span class="keyword">let</span> params = [image, name , birthday , gender , job];</span><br><span class="line">  connection.query(sql,params,</span><br><span class="line">  (err,rows,fields)=&gt; &#123;</span><br><span class="line">    res.send(rows);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br><span class="line">app.listen(port, <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`Listening on port <span class="subst">$&#123;port&#125;</span>`</span>));</span><br></pre></td></tr></table></figure>





<p>그런 다음  <code>.gitignore</code> 에 upload 폴더를 추가해 주자.</p>
<figure class="highlight plain"><figcaption><span>.gitignore</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># upload</span><br><span class="line">&#x2F;upload</span><br></pre></td></tr></table></figure>  



<p><strong>결과 화면</strong></p>
<p><img src="/img/12%EC%B6%94%EA%B0%80.png">    </p>
<p><img src="/img/12%EA%B2%B0%EA%B3%BC.png">  </p>
<p><img src="/img/12%EA%B2%B0%EA%B3%BC2.png">  </p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-09-04T02:45:45.000Z" title="2020-09-04T02:45:45.000Z">2020-09-04</time>게시 됨</span><span class="level-item"><time dateTime="2020-09-04T02:47:46.504Z" title="2020-09-04T02:47:46.504Z">2020-09-04</time>업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/">인턴</a><span> / </span><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/React-Node-js/">React + Node.js</a></span><span class="level-item">3분안에 읽기 (약 460 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/09/04/%EA%B3%A0%EA%B0%9D%EA%B4%80%EB%A6%AC%EC%98%88%EC%A0%9C%20%EA%B3%B5%EB%B6%80/project-11/">React와 Node.js로 만드는 고객 관리 시스템 개발-11</a></h1><div class="content"><h1 id="고객-추가-양식-구현하기"><a href="#고객-추가-양식-구현하기" class="headerlink" title="고객 추가 양식 구현하기"></a>고객 추가 양식 구현하기</h1><p>React에서 <em>Form</em> 을 처리하기 위해서는 <em>Event Handling</em> 을 수행해야 한다. 이번에는 서버로 고객 데이터를 전송하여 데이터베이스에 신규 고객 정보를 등록하는 방법을 알아보자.</p>
<p>먼저 React 클라이언트의 components 폴더에 <code>CustomerAdd.js</code> 를 만들자.</p>
<p>그 다음 서버와의 통신 목적의 라이브러리 <strong>axios</strong> 를 설치해 주자. client 폴더로 이동하여 아래와 같이 입력해주자</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save axios</span><br></pre></td></tr></table></figure>



<p>그 다음 <code>CustomerAdd.js</code> 를 작업해 주자.</p>
<figure class="highlight javascript"><figcaption><span>CustomerAdd.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;post&#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomerAdd</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state= &#123;</span><br><span class="line">      file:<span class="literal">null</span>,</span><br><span class="line">      userName:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      birthday:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      gender: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      job: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      fileName:<span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.handleFormSubmit = <span class="built_in">this</span>.handleFormSubmit.bind(<span class="built_in">this</span>)</span><br><span class="line">    <span class="built_in">this</span>.handleFileChange = <span class="built_in">this</span>.handleFileChange.bind(<span class="built_in">this</span>)</span><br><span class="line">    <span class="built_in">this</span>.handleValueChange = <span class="built_in">this</span>.handleValueChange.bind(<span class="built_in">this</span>)</span><br><span class="line">    <span class="built_in">this</span>.addCustomer = <span class="built_in">this</span>.addCustomer.bind(<span class="built_in">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleFormSubmit(e)&#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">    <span class="built_in">this</span>.addCustomer()</span><br><span class="line">    .then(<span class="function">(<span class="params">response</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(response.data);</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleFileChange(e)&#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      file: e.target.files[<span class="number">0</span>],</span><br><span class="line">      fileName: e.target.value</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  handleValueChange(e)&#123;</span><br><span class="line">    <span class="keyword">let</span> nextState =&#123;&#125;;</span><br><span class="line">    nextState[e.target.name] = e.target.value;</span><br><span class="line">    <span class="built_in">this</span>.setState(nextState);</span><br><span class="line">  &#125;</span><br><span class="line">  addCustomer()&#123;</span><br><span class="line">    <span class="keyword">const</span> url = <span class="string">&#x27;/api/customers&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> formData = <span class="keyword">new</span> FormData();</span><br><span class="line">    formData.append(<span class="string">&#x27;image&#x27;</span>,<span class="built_in">this</span>.state.file)</span><br><span class="line">    formData.append(<span class="string">&#x27;name&#x27;</span>,<span class="built_in">this</span>.state.userName)</span><br><span class="line">    formData.append(<span class="string">&#x27;birthday&#x27;</span>,<span class="built_in">this</span>.state.birthday)</span><br><span class="line">    formData.append(<span class="string">&#x27;gender&#x27;</span>,<span class="built_in">this</span>.state.gender)</span><br><span class="line">    formData.append(<span class="string">&#x27;job&#x27;</span>,<span class="built_in">this</span>.state.job)</span><br><span class="line">    <span class="keyword">const</span> config = &#123;</span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;multipart/form-data&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> post(url,formData,config)</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"></span><br><span class="line">      &lt;form onSubmit=&#123;<span class="built_in">this</span>.handleFormSubmit&#125;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;h1&gt;고객 추가&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">      프로필 이미지: <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span> <span class="attr">file</span>=<span class="string">&#123;this.state.file&#125;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.fileName&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleFileChange&#125;</span> /&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"></span><br><span class="line">      이름: <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;userName&quot;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.userName&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleValueChange&#125;</span> /&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"></span><br><span class="line">      생년월일: <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;birthday&quot;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.birthday&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleValueChange&#125;</span> /&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"></span><br><span class="line">      성별: <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.gender&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleValueChange&#125;</span> /&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"></span><br><span class="line">      직업: <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;job&quot;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.job&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleValueChange&#125;</span> /&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"></span><br><span class="line">      &lt;button type=<span class="string">&quot;submit&quot;</span>&gt;추가하기&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">      &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">      )</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> CustomerAdd</span><br></pre></td></tr></table></figure>





<p>그 다음 <code>App.js</code> 를 작업해 주자. CustomerAdd 컴포넌트를 화면에 출력하기 위해서 CustomerAdd를 import 해주고</p>
<figure class="highlight javascript"><figcaption><span>CustomerAdd.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> CustomerAdd <span class="keyword">from</span> <span class="string">&#x27;./components/CustomerAdd&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>  



<p>render 부분을 다음과 같이 바꿔주자</p>
<figure class="highlight javascript"><figcaption><span>CustomerAdd.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;Paper className = &#123;classes.root&#125;&gt;</span><br><span class="line">      &lt;Table className = &#123;classes.table&#125;&gt;</span><br><span class="line">        &lt;TableHead&gt;</span><br><span class="line">          &lt;TableRow&gt;</span><br><span class="line">            &lt;TableCell&gt; 번호 &lt;/TableCell&gt;</span><br><span class="line">            &lt;TableCell&gt; 이미지 &lt;/TableCell&gt;</span><br><span class="line">            &lt;TableCell&gt; 이름 &lt;/TableCell&gt;</span><br><span class="line">            &lt;TableCell&gt; 생년월일 &lt;/TableCell&gt;</span><br><span class="line">            &lt;TableCell&gt; 성별 &lt;/TableCell&gt;</span><br><span class="line">            &lt;TableCell&gt; 직업 &lt;/TableCell&gt;</span><br><span class="line">          &lt;/TableRow&gt;</span><br><span class="line">        &lt;/TableHead&gt;</span><br><span class="line">        &lt;TableBody&gt;</span><br><span class="line">        &#123;<span class="built_in">this</span>.state.customers ? <span class="built_in">this</span>.state.customers.map(<span class="function"><span class="params">c</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Customer</span> <span class="attr">key</span>=<span class="string">&#123;c.id&#125;</span> <span class="attr">id</span>=<span class="string">&#123;c.id&#125;</span> <span class="attr">image</span>=<span class="string">&#123;c.image&#125;</span> <span class="attr">name</span>=<span class="string">&#123;c.name&#125;</span> <span class="attr">birthday</span>=<span class="string">&#123;c.birthday&#125;</span> <span class="attr">gender</span>=<span class="string">&#123;c.gender&#125;</span> <span class="attr">job</span>=<span class="string">&#123;c.job&#125;</span> /&gt;</span></span></span><br><span class="line">          &#125;) : <span class="string">&#x27;&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">        &lt;/TableBody&gt;</span><br><span class="line">    &lt;/Table&gt;</span><br><span class="line">  &lt;/Paper&gt;</span><br><span class="line">  &lt;CustomerAdd/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br></pre></td></tr></table></figure>  

<p>그러면 다음과 같은 입력창이 생기는데 추가하기를 눌러주면 서버로 전송되는 것을 확인 할 수 있다.  </p>
<p><strong>결과 화면</strong></p>
<p><img src="/img/11%EA%B2%B0%EA%B3%BC.png">    </p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-09-04T01:56:22.000Z" title="2020-09-04T01:56:22.000Z">2020-09-04</time>게시 됨</span><span class="level-item"><time dateTime="2020-09-07T08:34:41.926Z" title="2020-09-07T08:34:41.926Z">2020-09-07</time>업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/">인턴</a><span> / </span><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/React-Node-js/">React + Node.js</a></span><span class="level-item">4분안에 읽기 (약 633 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/09/04/%EA%B3%A0%EA%B0%9D%EA%B4%80%EB%A6%AC%EC%98%88%EC%A0%9C%20%EA%B3%B5%EB%B6%80/project-10/">React와 Node.js로 만드는 고객 관리 시스템 개발-10</a></h1><div class="content"><h1 id="AWS-RDS-서비스를-이용한-DB-연동"><a href="#AWS-RDS-서비스를-이용한-DB-연동" class="headerlink" title="AWS RDS 서비스를 이용한  DB 연동"></a>AWS RDS 서비스를 이용한  DB 연동</h1><p>AWS RDS로 데이터 베이스 만들어 보자</p>
<p><img src="/img/10RDS.png">    </p>
<p><img src="/img/10RDS2.png">  </p>
<p><img src="/img/10RDS3.png">  </p>
<h2>MySQL Workbench</h2>

<p>위에까지 하다가 오류가 발생해서 AWS 설정을 바꿨는데 이게 굉장히 오래 걸려서 중간에 잘려먹었다.  퍼블릭 액세스를 아니오 라고 설정했던 것이 원인이었는데 예로 변경하였더니 정상 작동하였다.</p>
<p>Workbench와 연동하는 방법은 엔드포인트 주소를 호스트에 입력하고 데이터베이스를 생성할 때 설정했던 ID 와 비밀번호를 쳐서 연동하면 된다.</p>
<p>연동이 되면 새로운 스키마를 작성하고 다음과 같이 고객 테이블을 구축하자.</p>
<figure class="highlight sql"><figcaption><span>reactexample</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">USE</span> reactexample;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> CUSTOMER (</span><br><span class="line"></span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line"></span><br><span class="line">	image <span class="built_in">VARCHAR</span>(<span class="number">1024</span>),</span><br><span class="line"></span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">VARCHAR</span>(<span class="number">64</span>),</span><br><span class="line"></span><br><span class="line">	birthday <span class="built_in">VARCHAR</span>(<span class="number">64</span>),</span><br><span class="line"></span><br><span class="line">	gender <span class="built_in">VARCHAR</span>(<span class="number">64</span>),</span><br><span class="line"></span><br><span class="line">	job <span class="built_in">VARCHAR</span>(<span class="number">64</span>)</span><br><span class="line"></span><br><span class="line">) <span class="keyword">DEFAULT</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> CUSTOMER <span class="keyword">VALUES</span> (</span><br><span class="line">	<span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;https://placeimg.com/64/64/any&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;염소&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;031223&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;여자&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;대학생&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> CUSTOMER <span class="keyword">VALUES</span> (</span><br><span class="line">	<span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;https://placeimg.com/64/64/2&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;최동욱&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;951211&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;남자&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;인턴&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> CUSTOMER <span class="keyword">VALUES</span> (</span><br><span class="line">	<span class="number">3</span>,</span><br><span class="line">    <span class="string">&#x27;https://placeimg.com/64/64/3CUSTOMER&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;털보&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;961127&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;남자&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;개&#x27;</span>);</span><br></pre></td></tr></table></figure>





<p><strong>결과 화면</strong></p>
<p><img src="/img/10%EA%B2%B0%EA%B3%BC.png">  </p>
<h2>gitignore</h2>

<p>데이터베이스 관련 정보가 깃허브에 올라가지 않도록 서버 쪽 <code>.gitignore</code> 파일을 수정하자</p>
<figure class="highlight plain"><figcaption><span>.gitignore</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># database</span><br><span class="line">&#x2F;database.json</span><br></pre></td></tr></table></figure>

<p>​    </p>
<p>이후에 database.json 에서 데이터베이스 정보를 설정하면 된다</p>
<figure class="highlight json"><figcaption><span>database.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;host&quot;</span>: 데이터베이스 주소,</span><br><span class="line"></span><br><span class="line">    <span class="attr">&quot;user&quot;</span>: 데이터베이스 사용자,</span><br><span class="line"></span><br><span class="line">    <span class="attr">&quot;password&quot;</span>: 데이터베이스 비밀번호,</span><br><span class="line"></span><br><span class="line">    <span class="attr">&quot;port&quot;</span>: <span class="string">&quot;3306&quot;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">&quot;database&quot;</span>: 데이터베이스 이름</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2>Node.js와 MySQL 연동하기</h2>

<p>먼저 NPM을 통해서 MySQL 라이브러리를 설치하자.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -S mysql</span><br></pre></td></tr></table></figure>



<p>설치된 MySQL 라이브러리를 활용해서 연동이 가능하다.</p>
<figure class="highlight javascript"><figcaption><span>server.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="keyword">const</span> port = process.env.PORT || <span class="number">5000</span>;</span><br><span class="line">app.use(bodyParser.json());</span><br><span class="line">app.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>: <span class="literal">true</span>&#125;));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> data = fs.readFileSync(<span class="string">&#x27;./database.json&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> conf = <span class="built_in">JSON</span>.parse(data);</span><br><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> connection = mysql.createConnection(&#123;</span><br><span class="line">  host : conf.host,</span><br><span class="line">  user : conf.user,</span><br><span class="line">  password: conf.password,</span><br><span class="line">  port : conf.port,</span><br><span class="line">  database: conf.database</span><br><span class="line">&#125;);</span><br><span class="line">connection.connect();</span><br><span class="line">app.get(<span class="string">&#x27;/api/customers/&#x27;</span>, <span class="function">(<span class="params">req,res</span>) =&gt;</span>&#123;</span><br><span class="line">  connection.query(</span><br><span class="line">    <span class="string">&#x27;SELECT * FROM CUSTOMER&#x27;</span>,</span><br><span class="line">    (err , rows, fields) =&gt; &#123;</span><br><span class="line">      res.send(rows);</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(port, <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`Listening on port <span class="subst">$&#123;port&#125;</span>`</span>));</span><br></pre></td></tr></table></figure>


<blockquote>
<p>CORS 라는 것도 있는데 도메인 또는 포트가 다른 서버의 자원을 요청하는 매커니즘이다. 서버를 8000번 포트 , REACT를 3000번 포트에서 실행하면 발생하거나 , 이미지를 저장하는 서버와 접속하는 서버가 다른 경우이다.</p>
</blockquote>
<p><strong>결과 화면</strong></p>
<p><img src="/img/10%EA%B2%B0%EA%B3%BC2.png"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-09-03T06:21:10.000Z" title="2020-09-03T06:21:10.000Z">2020-09-03</time>게시 됨</span><span class="level-item"><time dateTime="2020-09-03T06:27:44.488Z" title="2020-09-03T06:27:44.488Z">2020-09-03</time>업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/">인턴</a><span> / </span><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/React-Node-js/">React + Node.js</a></span><span class="level-item">4분안에 읽기 (약 537 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/09/03/%EA%B3%A0%EA%B0%9D%EA%B4%80%EB%A6%AC%EC%98%88%EC%A0%9C%20%EA%B3%B5%EB%B6%80/project-9/">React와 Node.js로 만드는 고객 관리 시스템 개발-9</a></h1><div class="content"><h1 id="React의-라이프-사이클-및-API-로딩-처리"><a href="#React의-라이프-사이클-및-API-로딩-처리" class="headerlink" title="React의 라이프 사이클 및 API 로딩 처리"></a>React의 라이프 사이클 및 API 로딩 처리</h1><p>이번에는 API 로딩 메시지를 웹 사이트 상에 출력해보자 프로그레스 바 UI 는 Material UI에 이미 구현되어 있다.</p>
<blockquote>
<p>Material UI 프로그레스 바 : <a target="_blank" rel="noopener" href="https://material-ui.com/demos/progress/">https://material-ui.com/demos/progress/</a></p>
</blockquote>
<h2>React의 라이프 사이클 </h2>

<p>기본적으로 React 라이브러리가 처음 컴포넌트를 실행할 때는 다음의 순서를 따른다.</p>
<ol>
<li>constructor()</li>
<li>componentWillMount()</li>
<li>render()</li>
<li>componentDidMount()</li>
</ol>
<p>그리고 컴포넌트의 props 혹은 state가 변경될 때는 <code>shouldComponentUpdate()</code>  함수 등이 사용되어  실질적으로 다시 render() 함수를 불러와 뷰를 갱신하게 된다. 또한 컴포넌트가 삭제될 때는 <code>componentWillMount()</code> 함수가 실행된다는 특징이 있다.  </p>
<p>따라서 일반적으로 API를 불러와서 웹 사이트 화면에 특정한 뷰를 출력하고자 한다면 componentDidMount() 함수에서 API를 비동기적으로 호출하면 된다. 이후에 API에서 응답이 돌아왔을 때 뷰가 갱신되므로 API 응답 결과를 출력할 수 있다. 비동기적으로 호출한다는 점에서 API 서버에서 응답하지 않으면 사용자에게 로딩 화면만 출력이 된다.  </p>
<p>Circular Progress 라이브러리를 이용하여 프로그레스 바를 API 로딩 메시지로 사용하자.</p>
<figure class="highlight javascript"><figcaption><span>App.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;Component&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Customer <span class="keyword">from</span> <span class="string">&#x27;./components/Customer&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Paper <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/Paper&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Table <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/Table&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TableHead <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/TableHead&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TableBody <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/TableBody&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TableRow <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/TableRow&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TableCell <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/TableCell&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> CircularProgress <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/CircularProgress&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; withStyles &#125; <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/styles&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styles = <span class="function"><span class="params">theme</span> =&gt;</span> (&#123;</span><br><span class="line">  root: &#123;</span><br><span class="line">    width: <span class="string">&quot;100%&quot;</span>,</span><br><span class="line">    marginTop: theme.spacing.unit * <span class="number">3</span>,</span><br><span class="line">    overflowX: <span class="string">&quot;auto&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    table: &#123;</span><br><span class="line">      minWidth: <span class="number">1080</span></span><br><span class="line">    &#125;,</span><br><span class="line">    progress:&#123;</span><br><span class="line">      margin: theme.spacing.unit *<span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  state = &#123;</span><br><span class="line">    customers: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    completed: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount()&#123;</span><br><span class="line">    <span class="built_in">this</span>.timer = <span class="built_in">setInterval</span>(<span class="built_in">this</span>.progress,<span class="number">20</span>);</span><br><span class="line">    <span class="built_in">this</span>.callApi()</span><br><span class="line">      .then(<span class="function"><span class="params">res</span> =&gt;</span> <span class="built_in">this</span>.setState(&#123;<span class="attr">customers</span>:res&#125;))</span><br><span class="line">      .catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.log(err));</span><br><span class="line">  &#125;</span><br><span class="line">  componentWillUnmount()&#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timer);</span><br><span class="line">  &#125;</span><br><span class="line">  callApi = <span class="keyword">async</span>() =&gt;&#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(<span class="string">&#x27;/api/customers&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> body = <span class="keyword">await</span> response.json();</span><br><span class="line">    <span class="keyword">return</span> body;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  progress = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;completed &#125; = <span class="built_in">this</span>.state;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123; <span class="attr">completed</span>:completed &gt;=<span class="number">100</span>?<span class="number">0</span> : completed +<span class="number">1</span>&#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  render()&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; classes &#125; = <span class="built_in">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Paper className = &#123;classes.root&#125;&gt;</span><br><span class="line">        &lt;Table className = &#123;classes.table&#125;&gt;</span><br><span class="line">          &lt;TableHead&gt;</span><br><span class="line">            &lt;TableRow&gt;</span><br><span class="line">              &lt;TableCell&gt; 번호 &lt;/TableCell&gt;</span><br><span class="line">              &lt;TableCell&gt; 이미지 &lt;/TableCell&gt;</span><br><span class="line">              &lt;TableCell&gt; 이름 &lt;/TableCell&gt;</span><br><span class="line">              &lt;TableCell&gt; 생년월일 &lt;/TableCell&gt;</span><br><span class="line">              &lt;TableCell&gt; 성별 &lt;/TableCell&gt;</span><br><span class="line">              &lt;TableCell&gt; 직업 &lt;/TableCell&gt;</span><br><span class="line">            &lt;/TableRow&gt;</span><br><span class="line">          &lt;/TableHead&gt;</span><br><span class="line">          &lt;TableBody&gt;</span><br><span class="line">          &#123;<span class="built_in">this</span>.state.customers ? <span class="built_in">this</span>.state.customers.map(<span class="function"><span class="params">c</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Customer</span> <span class="attr">key</span>=<span class="string">&#123;c.id&#125;</span> <span class="attr">id</span>=<span class="string">&#123;c.id&#125;</span> <span class="attr">image</span>=<span class="string">&#123;c.image&#125;</span> <span class="attr">name</span>=<span class="string">&#123;c.name&#125;</span> <span class="attr">birthday</span>=<span class="string">&#123;c.birthday&#125;</span> <span class="attr">gender</span>=<span class="string">&#123;c.gender&#125;</span> <span class="attr">job</span>=<span class="string">&#123;c.job&#125;</span> /&gt;</span></span></span><br><span class="line">            &#125;) : <span class="string">&#x27;&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">          &lt;/TableBody&gt;</span><br><span class="line">      &lt;/Table&gt;</span><br><span class="line">    &lt;/Paper&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> withStyles(styles)(App);</span><br></pre></td></tr></table></figure>


<p><strong>결과 화면</strong><br><img src="/img/9%EA%B2%B0%EA%B3%BC.png">  </p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-09-03T06:01:22.000Z" title="2020-09-03T06:01:22.000Z">2020-09-03</time>게시 됨</span><span class="level-item"><time dateTime="2020-09-03T06:27:43.858Z" title="2020-09-03T06:27:43.858Z">2020-09-03</time>업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/">인턴</a><span> / </span><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/React-Node-js/">React + Node.js</a></span><span class="level-item">5분안에 읽기 (약 723 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/09/03/%EA%B3%A0%EA%B0%9D%EA%B4%80%EB%A6%AC%EC%98%88%EC%A0%9C%20%EA%B3%B5%EB%B6%80/project-8/">React와 Node.js로 만드는 고객 관리 시스템 개발-8</a></h1><div class="content"><h1 id="Express에서-REST-API-구축하기"><a href="#Express에서-REST-API-구축하기" class="headerlink" title="Express에서 REST API 구축하기"></a>Express에서 REST API 구축하기</h1><p>REST API는 상당수의 웹 서버 프레임워크에서 기본적으로 지원하는 기능으로 클라이언트가 웹 프로토콜을 기반으로 하여 효과적으로 데이터를 주고 받을 수 있도록 해준다. 이를 실습하기 위해 전체 고객 목록을 불러오는 API를 구현해 보자.</p>
<p>실제로는 DB에 연동해서 정보를 불러오는 형태로 개발해야 하지만 일단 하드코딩으로 해보자.</p>
<figure class="highlight javascript"><figcaption><span>server.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="keyword">const</span> port = process.env.PORT || <span class="number">5000</span>;</span><br><span class="line">app.use(bodyParser.json());</span><br><span class="line">app.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>: <span class="literal">true</span>&#125;));</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/api/customers/&#x27;</span>, <span class="function">(<span class="params">req,res</span>) =&gt;</span>&#123;</span><br><span class="line">  res.send([&#123;</span><br><span class="line">    <span class="string">&#x27;id&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;image&#x27;</span>: <span class="string">&#x27;https://placeimg.com/64/64/any&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;염소&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;birthday&#x27;</span>:<span class="string">&#x27;031223&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;gender&#x27;</span>:<span class="string">&#x27;여자&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;job&#x27;</span>:<span class="string">&#x27;대학생&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">  <span class="string">&#x27;id&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="string">&#x27;image&#x27;</span>: <span class="string">&#x27;https://placeimg.com/64/64/2&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;최동욱&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;birthday&#x27;</span>: <span class="string">&#x27;951211&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;gender&#x27;</span>: <span class="string">&#x27;남자&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;job&#x27;</span>: <span class="string">&#x27;인턴&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">  <span class="string">&#x27;id&#x27;</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="string">&#x27;image&#x27;</span>: <span class="string">&#x27;https://placeimg.com/64/64/3&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;털보&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;birthday&#x27;</span>: <span class="string">&#x27;961127&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;gender&#x27;</span>: <span class="string">&#x27;남자&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;job&#x27;</span>: <span class="string">&#x27;개&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(port, <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`Listening on port <span class="subst">$&#123;port&#125;</span>`</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>​    </p>
<p>그런 다음 서버를 재 가동하고 <code>api/customers</code> 경로에 들어가보면 다음과 같이 출력된다.</p>
<p><img src="/img/8%EA%B2%B0%EA%B3%BC.png">    </p>
<p>이후에 클라이언트에서 해당 API에 접근하여 고객 목록을 비동기적으로 가져오도록 만들자. 가장 먼저 5000번 포트를 API서버로 이용하기 위해 클라이언트의 <code>package.json</code> 파일에 다음을 추가하자.</p>
<figure class="highlight json"><figcaption><span>package.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&quot;proxy&quot;: &quot;http://localhost:5000/&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>  



<p>이제 <code>app.js</code> 파일을 작성하여 실제로 API 서버에 접근할 수 있도록 처리하면 된다.</p>
<p>비동기적인 API 요청 기능을 수행하기 위해서 <code>async-await</code> 구문을 사용하자 . 서버로부터 JSON 데이터를 받아올 때까지는 테이블에 내용을 출력하지 않다가 데이터를 모두 받아오면 내용을 채우게 된다.</p>
<figure class="highlight javascript"><figcaption><span>app.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;Component&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Customer <span class="keyword">from</span> <span class="string">&#x27;./components/Customer&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Paper <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/Paper&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Table <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/Table&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TableHead <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/TableHead&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TableBody <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/TableBody&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TableRow <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/TableRow&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TableCell <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/TableCell&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; withStyles &#125; <span class="keyword">from</span> <span class="string">&#x27;@material-ui/core/styles&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styles = <span class="function"><span class="params">theme</span> =&gt;</span> (&#123;</span><br><span class="line">  root: &#123;</span><br><span class="line">    width: <span class="string">&quot;100%&quot;</span>,</span><br><span class="line">    marginTop: theme.spacing.unit * <span class="number">3</span>,</span><br><span class="line">    overflowX: <span class="string">&quot;auto&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    table: &#123;</span><br><span class="line">      minWidth: <span class="number">1080</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  state = &#123;</span><br><span class="line">    customers: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount()&#123;</span><br><span class="line">    <span class="built_in">this</span>.callApi()</span><br><span class="line">      .then(<span class="function"><span class="params">res</span> =&gt;</span> <span class="built_in">this</span>.setState(&#123;<span class="attr">customers</span>:res&#125;))</span><br><span class="line">      .catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.log(err));</span><br><span class="line">  &#125;</span><br><span class="line">  callApi = <span class="keyword">async</span>() =&gt;&#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(<span class="string">&#x27;/api/customers&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> body = <span class="keyword">await</span> response.json();</span><br><span class="line">    <span class="keyword">return</span> body;</span><br><span class="line">  &#125;</span><br><span class="line">  render()&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; classes &#125; = <span class="built_in">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Paper className = &#123;classes.root&#125;&gt;</span><br><span class="line">        &lt;Table className = &#123;classes.table&#125;&gt;</span><br><span class="line">          &lt;TableHead&gt;</span><br><span class="line">            &lt;TableRow&gt;</span><br><span class="line">              &lt;TableCell&gt; 번호 &lt;/TableCell&gt;</span><br><span class="line">              &lt;TableCell&gt; 이미지 &lt;/TableCell&gt;</span><br><span class="line">              &lt;TableCell&gt; 이름 &lt;/TableCell&gt;</span><br><span class="line">              &lt;TableCell&gt; 생년월일 &lt;/TableCell&gt;</span><br><span class="line">              &lt;TableCell&gt; 성별 &lt;/TableCell&gt;</span><br><span class="line">              &lt;TableCell&gt; 직업 &lt;/TableCell&gt;</span><br><span class="line">            &lt;/TableRow&gt;</span><br><span class="line">          &lt;/TableHead&gt;</span><br><span class="line">          &lt;TableBody&gt;</span><br><span class="line">          &#123;<span class="built_in">this</span>.state.customers ? <span class="built_in">this</span>.state.customers.map(<span class="function"><span class="params">c</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Customer</span> <span class="attr">key</span>=<span class="string">&#123;c.id&#125;</span> <span class="attr">id</span>=<span class="string">&#123;c.id&#125;</span> <span class="attr">image</span>=<span class="string">&#123;c.image&#125;</span> <span class="attr">name</span>=<span class="string">&#123;c.name&#125;</span> <span class="attr">birthday</span>=<span class="string">&#123;c.birthday&#125;</span> <span class="attr">gender</span>=<span class="string">&#123;c.gender&#125;</span> <span class="attr">job</span>=<span class="string">&#123;c.job&#125;</span> /&gt;</span></span></span><br><span class="line">            &#125;) : <span class="string">&#x27;&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">          &lt;/TableBody&gt;</span><br><span class="line">      &lt;/Table&gt;</span><br><span class="line">    &lt;/Paper&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> withStyles(styles)(App);</span><br></pre></td></tr></table></figure>







<p>이제 서버 모듈 개발을 위해 루트 디렉터리에 <code>server.js</code> 파일을 생성한다.</p>
<figure class="highlight javascript"><figcaption><span>server.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="keyword">const</span> port = process.env.PORT || <span class="number">5000</span>;</span><br><span class="line">app.use(bodyParser.json());</span><br><span class="line">app.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>: <span class="literal">true</span>&#125;));</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/api/hello/&#x27;</span>, <span class="function">(<span class="params">req,res</span>) =&gt;</span>&#123;</span><br><span class="line">  res.send(&#123; <span class="attr">message</span>: <span class="string">&quot;Hello Express!&quot;</span>&#125;);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(port, <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`Listening on port <span class="subst">$&#123;port&#125;</span>`</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<p>이후 <code>yarn dev</code> 명령어를 이용해 서버를 구동시키자</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn dev</span><br></pre></td></tr></table></figure>





<p><strong>결과 화면</strong>  </p>
<p><img src="/img/8%EA%B2%B0%EA%B3%BC2.png">  </p>
</div></article></div><nav class="pagination is-centered mt-4" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/page/0/">이전</a></div><div class="pagination-next"><a href="/page/2/">다음</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/">1</a></li><li><a class="pagination-link" href="/page/2/">2</a></li><li><a class="pagination-link" href="/page/3/">3</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/0000553002_001_20180912153825632.gif" alt="Choi Dong Wook"></figure><p class="title is-size-4 is-block line-height-inherit">Choi Dong Wook</p><p class="is-size-6 is-block">HUFS</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Incheon , Korea</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">포스트</p><a href="/archives"><p class="title">25</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">카테고리</p><a href="/categories"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">태그</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/cheal3" target="_blank" rel="noopener">팔로우</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/cheal3"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">카테고리</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Test/"><span class="level-start"><span class="level-item">Test</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%EC%9D%B8%ED%84%B4/"><span class="level-start"><span class="level-item">인턴</span></span><span class="level-end"><span class="level-item tag">22</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/%EC%9D%B8%ED%84%B4/JS/"><span class="level-start"><span class="level-item">JS</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%EC%9D%B8%ED%84%B4/React-Node-js/"><span class="level-start"><span class="level-item">React + Node.js</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%EC%9D%B8%ED%84%B4/React-js/"><span class="level-start"><span class="level-item">React.js</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%EC%9D%B8%ED%84%B4/%EA%B3%B5%EB%B6%80/"><span class="level-start"><span class="level-item">공부</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/%EC%9D%B8%ED%84%B4/%EA%B3%B5%EB%B6%80/%EC%9B%B9/"><span class="level-start"><span class="level-item">웹</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">최근 글</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-09-10T06:16:32.974Z">2020-09-10</time></p><p class="title is-6"><a class="link-muted" href="/2020/09/10/%EC%82%AC%EC%A7%84/%ED%85%8C%EC%8A%A4%ED%8A%B8/"> </a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-09-08T07:17:44.000Z">2020-09-08</time></p><p class="title is-6"><a class="link-muted" href="/2020/09/08/react%20express%20%EC%97%B0%EB%8F%99/react%20express%20%EC%97%B0%EB%8F%993/">React x Express 연동하여 데이터 전송하기(3)</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/">인턴</a> / <a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/React-js/">React.js</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-09-08T05:11:55.000Z">2020-09-08</time></p><p class="title is-6"><a class="link-muted" href="/2020/09/08/react%20express%20%EC%97%B0%EB%8F%99/react%20express%20%EC%97%B0%EB%8F%992/">React x Express 연동하여 데이터 전송하기(2)</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/">인턴</a> / <a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/React-js/">React.js</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-09-08T02:09:25.000Z">2020-09-08</time></p><p class="title is-6"><a class="link-muted" href="/2020/09/08/react%20express%20%EC%97%B0%EB%8F%99/react%20express%20%EC%97%B0%EB%8F%99/">React x Express 연동하여 데이터 전송하기</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/">인턴</a> / <a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/React-js/">React.js</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-09-04T05:58:49.000Z">2020-09-04</time></p><p class="title is-6"><a class="link-muted" href="/2020/09/04/%EA%B3%A0%EA%B0%9D%EA%B4%80%EB%A6%AC%EC%98%88%EC%A0%9C%20%EA%B3%B5%EB%B6%80/project-13/">React와 Node.js로 만드는 고객 관리 시스템 개발-13</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/">인턴</a> / <a class="link-muted" href="/categories/%EC%9D%B8%ED%84%B4/React-Node-js/">React + Node.js</a></p></div></article></div></div><!--!--><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">아카이브</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/09/"><span class="level-start"><span class="level-item">9월 2020</span></span><span class="level-end"><span class="level-item tag">24</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/08/"><span class="level-start"><span class="level-item">8월 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="Choi Dong Wook blog" height="28"></a><p class="size-small"><span>&copy; 2020 cheal3@naver.com</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("ko");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'http://cheal3.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"입력 하세요...","untitled":"(제목없음)","posts":"포스트","pages":"페이지","categories":"카테고리","tags":"태그"});
        });</script></body></html>